(self.webpackChunksimple_vp=self.webpackChunksimple_vp||[]).push([[179],{"./generated-stories-entry.js":function(module,__unused_webpack_exports,__webpack_require__){"use strict";module=__webpack_require__.nmd(module),(0,__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js").configure)([__webpack_require__("./src sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?%21(?:^|\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.mdx)$"),__webpack_require__("./src sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?%21(?:^|\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.(js|jsx|ts|tsx))$")],module,!1)},"./src/stories/Embedded.stories.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Embedded:function(){return Embedded}});var _Users_schoen_Projects_simple_vp_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),_Users_schoen_Projects_simple_vp_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),_Users_schoen_Projects_simple_vp_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_components__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/index.js"),react_icons_fi__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/react-icons/fi/index.esm.js"),_components_Constants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/Constants.js"),react_use_measure__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react-use-measure/dist/web.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["drawers","objectTypes","programData","drawerWidth"];__webpack_exports__.default={title:"Embedded",component:_components__WEBPACK_IMPORTED_MODULE_1__.qA};var Embedded=function Template(args){var drawers=args.drawers,objectTypes=args.objectTypes,programData=args.programData,drawerWidth=args.drawerWidth,otherArgs=(0,_Users_schoen_Projects_simple_vp_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_4__.Z)(args,_excluded),_useMeasure=(0,react_use_measure__WEBPACK_IMPORTED_MODULE_5__.Z)(),_useMeasure2=(0,_Users_schoen_Projects_simple_vp_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_6__.Z)(_useMeasure,2),ref=_useMeasure2[0],bounds=_useMeasure2[1];return(0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((function(){_components__WEBPACK_IMPORTED_MODULE_1__.y6.setState({programSpec:{drawers:drawers,objectTypes:objectTypes},programData:programData})})),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{style:{display:"flex",height:"100vh",flexDirection:"row",backgroundColor:otherArgs.highlightColor},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{style:{flex:1,backgroundColor:"darkgray"}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{ref:ref,style:{flex:1,margin:10},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components__WEBPACK_IMPORTED_MODULE_1__.qA,(0,_Users_schoen_Projects_simple_vp_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__.Z)((0,_Users_schoen_Projects_simple_vp_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__.Z)({},otherArgs),{},{store:_components__WEBPACK_IMPORTED_MODULE_1__.y6,height:bounds.height,width:bounds.width,drawerWidth:drawerWidth}))})]})}.bind({});Embedded.args={highlightColor:"#ff00ff",drawerWidth:235,drawers:[{title:"Structures",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.INSTANCE,objectTypes:["functionType","operationType","blockType"],icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.j4u},{title:"Functions",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.CALL,objectType:"functionType",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.xqh},{title:"Hats",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.REFERENCE,objectType:"hatType",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.aCJ},{title:"Boots",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.REFERENCE,objectType:"bootType",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.Wpg}],objectTypes:{programType:{name:"Program",type:_components__WEBPACK_IMPORTED_MODULE_1__.vK.OBJECT,instanceBlock:{onCanvas:!0,color:"#3f3f3f",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.ggF,extras:[{type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.INDICATOR,accessor:function accessor(data){return data.properties.children.length},label:"Size"},{icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.K9M,type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.DROPDOWN,contents:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.NAME_EDIT_TOGGLE,_components__WEBPACK_IMPORTED_MODULE_1__.fY.LOCKED_INDICATOR,{icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.K9M,label:"More Options",type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.DROPDOWN,contents:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.NAME_EDIT_TOGGLE,_components__WEBPACK_IMPORTED_MODULE_1__.fY.COLLAPSE_TOGGLE,_components__WEBPACK_IMPORTED_MODULE_1__.fY.LOCKED_INDICATOR,{type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.INDICATOR,accessor:function accessor(data){return data.properties.children.length},label:"Size"},{type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.FUNCTION_BUTTON,onClick:"updateItemBlockColors",label:"Cycle Color",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.fxx}]}]},_components__WEBPACK_IMPORTED_MODULE_1__.fY.LOCKED_INDICATOR]},referenceBlock:null,properties:{children:{name:"Children",accepts:["operationType","functionType","blockType"],default:[],isList:!0,fullWidth:!0}}},blockType:{name:"Block",type:_components__WEBPACK_IMPORTED_MODULE_1__.vK.OBJECT,instanceBlock:{onCanvas:!1,color:"#7f7f7f",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.yG,extras:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.COLLAPSE_TOGGLE,{type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.INDICATOR,accessor:function accessor(data){return data.properties.children.length},label:"Size"},{type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.FUNCTION_BUTTON,onClick:"updateItemBlockColors",label:"Cycle Color",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.fxx},_components__WEBPACK_IMPORTED_MODULE_1__.fY.LOCKED_INDICATOR]},referenceBlock:null,properties:{children:{name:"Children",accepts:["operationType","functionType","blockType"],default:[],isList:!0,fullWidth:!0}}},functionType:{name:"Function",type:_components__WEBPACK_IMPORTED_MODULE_1__.vK.FUNCTION,instanceBlock:{onCanvas:!0,color:"#62869e",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.xqh,extras:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.LOCKED_INDICATOR,{icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.K9M,type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.DROPDOWN,contents:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.SELECTION_TOGGLE,_components__WEBPACK_IMPORTED_MODULE_1__.fY.DELETE_BUTTON,_components__WEBPACK_IMPORTED_MODULE_1__.fY.LOCKED_INDICATOR,_components__WEBPACK_IMPORTED_MODULE_1__.fY.DEBUG_TOGGLE,{type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.ADD_ARGUMENT_GROUP,allowed:["hatType","bootType"]},{type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.ADD_ARGUMENT,argumentType:"hatType"}]},{type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.ADD_ARGUMENT_GROUP,allowed:["hatType","bootType"]}]},callBlock:{onCanvas:!1,color:"#62869e",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.xqh},properties:{children:{name:"Children",accepts:["functionType","blockType","operationType"],default:[],isList:!0,fullWidth:!0}}},operationType:{name:"Operation",type:_components__WEBPACK_IMPORTED_MODULE_1__.vK.OBJECT,instanceBlock:{onCanvas:!1,color:"#629e6c",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.j4u,extras:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.LOCKED_INDICATOR,{icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.K9M,type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.DROPDOWN,contents:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.DELETE_BUTTON,_components__WEBPACK_IMPORTED_MODULE_1__.fY.DEBUG_TOGGLE]}],hideNewPrefix:!0},properties:{hat:{name:"Hat",accepts:["hatType"],default:null,isList:!1},boot:{name:"Boot",accepts:["bootType"],default:null,isList:!1},speed:{name:"Speed",type:_components_Constants__WEBPACK_IMPORTED_MODULE_2__.Rb.NUMBER,default:1,min:0,max:2},doFunky:{name:"Do Funky",type:_components_Constants__WEBPACK_IMPORTED_MODULE_2__.Rb.BOOLEAN,default:!1},greeting:{name:"Greeting",type:_components_Constants__WEBPACK_IMPORTED_MODULE_2__.Rb.STRING,default:""},time:{name:"Time",type:_components_Constants__WEBPACK_IMPORTED_MODULE_2__.Rb.OPTIONS,options:[{value:"am",label:"AM"},{value:"pm",label:"PM"}],default:"am"}}},hatType:{name:"Hat",type:_components__WEBPACK_IMPORTED_MODULE_1__.vK.OBJECT,instanceBlock:null,referenceBlock:{onCanvas:!1,color:"#AD1FDE",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.aCJ,extras:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.LOCKED_INDICATOR,{icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.K9M,type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.DROPDOWN,contents:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.DELETE_BUTTON,_components__WEBPACK_IMPORTED_MODULE_1__.fY.DEBUG_TOGGLE]}]}},bootType:{name:"Boot",type:_components__WEBPACK_IMPORTED_MODULE_1__.vK.OBJECT,instanceBlock:null,referenceBlock:{onCanvas:!1,color:"#B3A533",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.aCJ,extras:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.LOCKED_INDICATOR,{icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.K9M,type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.DROPDOWN,contents:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.DELETE_BUTTON,_components__WEBPACK_IMPORTED_MODULE_1__.fY.DEBUG_TOGGLE]}]}}},programData:{"45535153s":{id:"45535153s",name:"MyProgram",type:"programType",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.INSTANCE,properties:{children:["2dfsessfs"]},position:{x:0,y:10},canDelete:!1,canEdit:!0,selected:!1,editing:!1},"655sssefs":{id:"655sssefs",name:"MyFunction",type:"functionType",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.INSTANCE,arguments:[],properties:{children:[]},position:{x:400,y:10},canDelete:!0,canEdit:!0,selected:!0,editing:!1},s3siakawme:{id:"s3siakawme",name:"Passed Hat",type:"hatType",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.ARGUMENT,canDelete:!0,canEdit:!0,selected:!1,editing:!1},"2dfsessfs":{id:"2dfsessfs",name:"MyOperation",type:"operationType",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.INSTANCE,properties:{hat:null,boot:null,speed:1,doFunky:!0,greeting:"Hello!"},canDelete:!0,canEdit:!0,selected:!1,editing:!1},"6dewwwwww":{id:"6dewwwwww",name:"Sombrero",type:"hatType",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.INSTANCE,canDelete:!0,canEdit:!0,selected:!1,editing:!1},pspssse32:{id:"pspssse32",name:"Fur Boots",type:"bootType",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.INSTANCE,canDelete:!0,canEdit:!0,selected:!1,editing:!1}}},Embedded.parameters=(0,_Users_schoen_Projects_simple_vp_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__.Z)({storySource:{source:"(args) => {\n  const { drawers, objectTypes, programData, drawerWidth, ...otherArgs } = args;\n\n  const [ref, bounds] = useMeasure();\n\n  useLayoutEffect(()=>{\n    useDefaultProgrammingStore.setState({programSpec:{drawers,objectTypes},programData});\n  })\n  return (\n    <div style={{display:'flex',height:'100vh',flexDirection:'row',backgroundColor:otherArgs.highlightColor}}>\n      <div style={{flex:1,backgroundColor:'darkgray'}}>\n      \n      </div>\n    <div ref={ref} style={{flex:1,margin:10}}>\n      <Environment {...otherArgs} store={useDefaultProgrammingStore} height={bounds.height} width={bounds.width} drawerWidth={drawerWidth}/>\n    </div>\n    </div>\n    )\n}"}},Embedded.parameters)},"./src/stories/Environment.stories.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Fullscreen:function(){return Fullscreen}});var _Users_schoen_Projects_simple_vp_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),_Users_schoen_Projects_simple_vp_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),_Users_schoen_Projects_simple_vp_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_components__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/index.js"),react_icons_fi__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/react-icons/fi/index.esm.js"),_components_Constants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/Constants.js"),react_use_measure__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react-use-measure/dist/web.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["drawers","objectTypes","programData","drawerWidth"];__webpack_exports__.default={title:"Fullscreen",component:_components__WEBPACK_IMPORTED_MODULE_1__.qA};var Fullscreen=function Template(args){var drawers=args.drawers,objectTypes=args.objectTypes,programData=args.programData,drawerWidth=args.drawerWidth,otherArgs=(0,_Users_schoen_Projects_simple_vp_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_4__.Z)(args,_excluded),_useMeasure=(0,react_use_measure__WEBPACK_IMPORTED_MODULE_5__.Z)(),_useMeasure2=(0,_Users_schoen_Projects_simple_vp_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_6__.Z)(_useMeasure,2),ref=_useMeasure2[0],bounds=_useMeasure2[1];return(0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((function(){_components__WEBPACK_IMPORTED_MODULE_1__.y6.setState({programSpec:{drawers:drawers,objectTypes:objectTypes},programData:programData})})),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{ref:ref,style:{display:"flex",height:"100vh",flexDirection:"row",backgroundColor:otherArgs.highlightColor},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components__WEBPACK_IMPORTED_MODULE_1__.qA,(0,_Users_schoen_Projects_simple_vp_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__.Z)((0,_Users_schoen_Projects_simple_vp_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__.Z)({},otherArgs),{},{store:_components__WEBPACK_IMPORTED_MODULE_1__.y6,height:bounds.height,width:bounds.width,drawerWidth:drawerWidth}))})}.bind({});Fullscreen.args={highlightColor:"#ff00ff",drawerWidth:235,drawers:[{title:"Structures",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.INSTANCE,objectTypes:["functionType","operationType","blockType"],icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.j4u},{title:"Functions",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.CALL,objectType:"functionType",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.xqh},{title:"Hats",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.REFERENCE,objectType:"hatType",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.aCJ},{title:"Boots",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.REFERENCE,objectType:"bootType",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.Wpg}],objectTypes:{programType:{name:"Program",type:_components__WEBPACK_IMPORTED_MODULE_1__.vK.OBJECT,instanceBlock:{onCanvas:!0,color:"#3f3f3f",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.ggF,extras:[{type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.INDICATOR,accessor:function accessor(data){return data.properties.children.length},label:"Size"},{icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.K9M,type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.DROPDOWN,contents:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.NAME_EDIT_TOGGLE,_components__WEBPACK_IMPORTED_MODULE_1__.fY.LOCKED_INDICATOR,{icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.K9M,label:"More Options",type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.DROPDOWN,contents:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.NAME_EDIT_TOGGLE,_components__WEBPACK_IMPORTED_MODULE_1__.fY.COLLAPSE_TOGGLE,_components__WEBPACK_IMPORTED_MODULE_1__.fY.LOCKED_INDICATOR,{type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.INDICATOR,accessor:function accessor(data){return data.properties.children.length},label:"Size"},{type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.FUNCTION_BUTTON,onClick:"updateItemBlockColors",label:"Cycle Color",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.fxx}]}]},_components__WEBPACK_IMPORTED_MODULE_1__.fY.LOCKED_INDICATOR]},referenceBlock:null,properties:{children:{name:"Children",accepts:["operationType","functionType","blockType"],default:[],isList:!0,fullWidth:!0}}},blockType:{name:"Block",type:_components__WEBPACK_IMPORTED_MODULE_1__.vK.OBJECT,instanceBlock:{onCanvas:!1,color:"#7f7f7f",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.yG,extras:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.COLLAPSE_TOGGLE,{type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.INDICATOR,accessor:function accessor(data){return data.properties.children.length},label:"Size"},{type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.FUNCTION_BUTTON,onClick:"updateItemBlockColors",label:"Cycle Color",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.fxx},_components__WEBPACK_IMPORTED_MODULE_1__.fY.LOCKED_INDICATOR]},referenceBlock:null,properties:{children:{name:"Children",accepts:["operationType","functionType","blockType"],default:[],isList:!0,fullWidth:!0}}},functionType:{name:"Function",type:_components__WEBPACK_IMPORTED_MODULE_1__.vK.FUNCTION,instanceBlock:{onCanvas:!0,color:"#62869e",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.xqh,extras:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.LOCKED_INDICATOR,{icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.K9M,type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.DROPDOWN,contents:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.SELECTION_TOGGLE,_components__WEBPACK_IMPORTED_MODULE_1__.fY.NAME_EDIT_TOGGLE,_components__WEBPACK_IMPORTED_MODULE_1__.fY.DELETE_BUTTON,_components__WEBPACK_IMPORTED_MODULE_1__.fY.LOCKED_INDICATOR,_components__WEBPACK_IMPORTED_MODULE_1__.fY.DEBUG_TOGGLE,{type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.ADD_ARGUMENT_GROUP,allowed:["hatType","bootType"]},{type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.ADD_ARGUMENT,argumentType:"hatType"}]},{type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.ADD_ARGUMENT_GROUP,allowed:["hatType","bootType"]}]},callBlock:{onCanvas:!1,color:"#62869e",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.xqh,extras:[{icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.K9M,type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.DROPDOWN,contents:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.DEBUG_TOGGLE]}]},properties:{children:{name:"Children",accepts:["functionType","blockType","operationType"],default:[],isList:!0,fullWidth:!0}}},operationType:{name:"Operation",type:_components__WEBPACK_IMPORTED_MODULE_1__.vK.OBJECT,instanceBlock:{onCanvas:!1,color:"#629e6c",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.j4u,extras:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.LOCKED_INDICATOR,{icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.K9M,type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.DROPDOWN,contents:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.DELETE_BUTTON,_components__WEBPACK_IMPORTED_MODULE_1__.fY.DEBUG_TOGGLE]}],hideNewPrefix:!0},properties:{hat:{name:"Hat",accepts:["hatType"],default:null,isList:!1},boot:{name:"Boot",accepts:["bootType"],default:null,isList:!1},speed:{name:"Speed",type:_components_Constants__WEBPACK_IMPORTED_MODULE_2__.Rb.NUMBER,default:1,min:0,max:2},doFunky:{name:"Do Funky",type:_components_Constants__WEBPACK_IMPORTED_MODULE_2__.Rb.BOOLEAN,default:!1},greeting:{name:"Greeting",type:_components_Constants__WEBPACK_IMPORTED_MODULE_2__.Rb.STRING,default:""},time:{name:"Time",type:_components_Constants__WEBPACK_IMPORTED_MODULE_2__.Rb.OPTIONS,options:[{value:"am",label:"AM"},{value:"pm",label:"PM"}],default:"am"}}},hatType:{name:"Hat",type:_components__WEBPACK_IMPORTED_MODULE_1__.vK.OBJECT,instanceBlock:null,referenceBlock:{onCanvas:!1,color:"#AD1FDE",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.aCJ,extras:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.LOCKED_INDICATOR,{icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.K9M,type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.DROPDOWN,contents:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.DELETE_BUTTON,_components__WEBPACK_IMPORTED_MODULE_1__.fY.DEBUG_TOGGLE,_components__WEBPACK_IMPORTED_MODULE_1__.fY.NAME_EDIT_TOGGLE]}]}},bootType:{name:"Boot",type:_components__WEBPACK_IMPORTED_MODULE_1__.vK.OBJECT,instanceBlock:null,referenceBlock:{onCanvas:!1,color:"#B3A533",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.aCJ,extras:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.LOCKED_INDICATOR,{icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.K9M,type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.DROPDOWN,contents:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.DELETE_BUTTON,_components__WEBPACK_IMPORTED_MODULE_1__.fY.DEBUG_TOGGLE]}]}}},programData:{"45535153s":{id:"45535153s",name:"MyProgram",type:"programType",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.INSTANCE,properties:{children:["2dfsessfs"]},position:{x:0,y:10},canDelete:!1,canEdit:!0,selected:!1,editing:!1},"655sssefs":{id:"655sssefs",name:"MyFunction",type:"functionType",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.INSTANCE,arguments:["s3siakawme"],properties:{children:[]},position:{x:400,y:10},canDelete:!0,canEdit:!0,selected:!1,editing:!1},s3siakawme:{id:"s3siakawme",name:"Passed Hat",type:"hatType",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.ARGUMENT,canDelete:!0,canEdit:!0,selected:!1,editing:!1},"2dfsessfs":{id:"2dfsessfs",name:"MyOperation",type:"operationType",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.INSTANCE,properties:{hat:null,boot:null,speed:1,doFunky:!0,greeting:"Hello!"},canDelete:!0,canEdit:!0,selected:!1,editing:!1},"6dewwwwww":{id:"6dewwwwww",name:"Sombrero",type:"hatType",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.INSTANCE,canDelete:!0,canEdit:!0,selected:!1,editing:!1},pspssse32:{id:"pspssse32",name:"Fur Boots",type:"bootType",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.INSTANCE,canDelete:!0,canEdit:!0,selected:!1,editing:!1}}},Fullscreen.parameters=(0,_Users_schoen_Projects_simple_vp_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__.Z)({storySource:{source:"(args) => {\n  const { drawers, objectTypes, programData, drawerWidth, ...otherArgs } = args;\n\n  const [ref, bounds] = useMeasure();\n  \n  useLayoutEffect(()=>{\n    useDefaultProgrammingStore.setState({programSpec:{drawers,objectTypes},programData});\n  })\n  return (\n    <div ref={ref} style={{display:'flex',height:'100vh',flexDirection:'row',backgroundColor:otherArgs.highlightColor}}>\n      <Environment {...otherArgs} store={useDefaultProgrammingStore} height={bounds.height} width={bounds.width} drawerWidth={drawerWidth}/>\n    </div>\n    )\n}"}},Fullscreen.parameters)},"./src/stories/Stress.stories.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Stress:function(){return Stress}});var _Users_schoen_Projects_simple_vp_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),_Users_schoen_Projects_simple_vp_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),_Users_schoen_Projects_simple_vp_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_components__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/index.js"),react_icons_fi__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/react-icons/fi/index.esm.js"),_components_Constants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/Constants.js"),react_use_measure__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react-use-measure/dist/web.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["drawers","objectTypes","programData","drawerWidth"];__webpack_exports__.default={title:"Stress",component:_components__WEBPACK_IMPORTED_MODULE_1__.qA};var Stress=function Template(args){var drawers=args.drawers,objectTypes=args.objectTypes,programData=args.programData,drawerWidth=args.drawerWidth,otherArgs=(0,_Users_schoen_Projects_simple_vp_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_4__.Z)(args,_excluded),_useMeasure=(0,react_use_measure__WEBPACK_IMPORTED_MODULE_5__.Z)(),_useMeasure2=(0,_Users_schoen_Projects_simple_vp_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_6__.Z)(_useMeasure,2),ref=_useMeasure2[0],bounds=_useMeasure2[1];return(0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((function(){_components__WEBPACK_IMPORTED_MODULE_1__.y6.setState({programSpec:{drawers:drawers,objectTypes:objectTypes},programData:programData})})),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{ref:ref,style:{display:"flex",height:"100vh",flexDirection:"row",backgroundColor:otherArgs.highlightColor},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_components__WEBPACK_IMPORTED_MODULE_1__.qA,(0,_Users_schoen_Projects_simple_vp_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__.Z)((0,_Users_schoen_Projects_simple_vp_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__.Z)({},otherArgs),{},{store:_components__WEBPACK_IMPORTED_MODULE_1__.y6,height:bounds.height,width:bounds.width,drawerWidth:drawerWidth}))})}.bind({});Stress.args={highlightColor:"#ff00ff",drawerWidth:235,drawers:[{title:"Structures",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.INSTANCE,objectTypes:["functionType","operationType","blockType"],icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.j4u},{title:"Functions",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.CALL,objectType:"functionType",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.xqh},{title:"Hats",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.REFERENCE,objectType:"hatType",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.aCJ},{title:"Boots",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.REFERENCE,objectType:"bootType",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.Wpg}],objectTypes:{programType:{name:"Program",type:_components__WEBPACK_IMPORTED_MODULE_1__.vK.OBJECT,instanceBlock:{onCanvas:!0,color:"#3f3f3f",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.ggF,extras:[{type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.INDICATOR,accessor:function accessor(data){return data.properties.children.length},label:"Size"},{icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.K9M,type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.DROPDOWN,contents:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.NAME_EDIT_TOGGLE,_components__WEBPACK_IMPORTED_MODULE_1__.fY.LOCKED_INDICATOR,{icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.K9M,label:"More Options",type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.DROPDOWN,contents:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.NAME_EDIT_TOGGLE,_components__WEBPACK_IMPORTED_MODULE_1__.fY.COLLAPSE_TOGGLE,_components__WEBPACK_IMPORTED_MODULE_1__.fY.LOCKED_INDICATOR,{type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.INDICATOR,accessor:function accessor(data){return data.properties.children.length},label:"Size"},{type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.FUNCTION_BUTTON,onClick:"updateItemBlockColors",label:"Cycle Color",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.fxx}]}]},_components__WEBPACK_IMPORTED_MODULE_1__.fY.LOCKED_INDICATOR]},referenceBlock:null,properties:{children:{name:"Children",accepts:["operationType","functionType","blockType"],default:[],isList:!0,fullWidth:!0},description:{name:"Description",type:_components_Constants__WEBPACK_IMPORTED_MODULE_2__.Rb.IGNORED,default:"Some description text"}}},blockType:{name:"Block",type:_components__WEBPACK_IMPORTED_MODULE_1__.vK.OBJECT,instanceBlock:{onCanvas:!1,color:"#7f7f7f",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.yG,extras:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.COLLAPSE_TOGGLE,{type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.INDICATOR,accessor:function accessor(data){return data.properties.children.length},label:"Size"},{type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.FUNCTION_BUTTON,onClick:"updateItemBlockColors",label:"Cycle Color",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.fxx},_components__WEBPACK_IMPORTED_MODULE_1__.fY.LOCKED_INDICATOR]},referenceBlock:null,properties:{children:{name:"Children",accepts:["operationType","functionType","blockType"],default:[],isList:!0,fullWidth:!0}}},functionType:{name:"Function",type:_components__WEBPACK_IMPORTED_MODULE_1__.vK.FUNCTION,instanceBlock:{onCanvas:!0,color:"#62869e",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.xqh,extras:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.LOCKED_INDICATOR,{icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.K9M,type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.DROPDOWN,contents:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.SELECTION_TOGGLE,_components__WEBPACK_IMPORTED_MODULE_1__.fY.DELETE_BUTTON,_components__WEBPACK_IMPORTED_MODULE_1__.fY.LOCKED_INDICATOR,_components__WEBPACK_IMPORTED_MODULE_1__.fY.DEBUG_TOGGLE,{type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.ADD_ARGUMENT_GROUP,allowed:["hatType","bootType"]},{type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.ADD_ARGUMENT,argumentType:"hatType"}]},{type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.ADD_ARGUMENT_GROUP,allowed:["hatType","bootType"]}]},callBlock:{onCanvas:!1,color:"#62869e",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.xqh},properties:{children:{name:"Children",accepts:["functionType","blockType","operationType"],default:[],isList:!0,fullWidth:!0}}},operationType:{name:"Operation",type:_components__WEBPACK_IMPORTED_MODULE_1__.vK.OBJECT,instanceBlock:{onCanvas:!1,color:"#629e6c",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.j4u,extras:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.LOCKED_INDICATOR,{icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.K9M,type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.DROPDOWN,contents:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.DELETE_BUTTON,_components__WEBPACK_IMPORTED_MODULE_1__.fY.DEBUG_TOGGLE]}],hideNewPrefix:!0},properties:{hat:{name:"Hat",accepts:["hatType"],default:null,isList:!1},boot:{name:"Boot",accepts:["bootType"],default:null,isList:!1},speed:{name:"Speed",type:_components_Constants__WEBPACK_IMPORTED_MODULE_2__.Rb.NUMBER,default:1,min:0,max:2},doFunky:{name:"Do Funky",type:_components_Constants__WEBPACK_IMPORTED_MODULE_2__.Rb.BOOLEAN,default:!1},greeting:{name:"Greeting",type:_components_Constants__WEBPACK_IMPORTED_MODULE_2__.Rb.STRING,default:""},time:{name:"Time",type:_components_Constants__WEBPACK_IMPORTED_MODULE_2__.Rb.OPTIONS,options:[{value:"am",label:"AM"},{value:"pm",label:"PM"}],default:"am"},description:{name:"Description",type:_components_Constants__WEBPACK_IMPORTED_MODULE_2__.Rb.IGNORED,default:"Some description text"}}},hatType:{name:"Hat",type:_components__WEBPACK_IMPORTED_MODULE_1__.vK.OBJECT,instanceBlock:null,referenceBlock:{onCanvas:!1,color:"#AD1FDE",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.aCJ,extras:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.LOCKED_INDICATOR,{icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.K9M,type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.DROPDOWN,contents:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.DELETE_BUTTON,_components__WEBPACK_IMPORTED_MODULE_1__.fY.DEBUG_TOGGLE]}]}},bootType:{name:"Boot",type:_components__WEBPACK_IMPORTED_MODULE_1__.vK.OBJECT,instanceBlock:null,referenceBlock:{onCanvas:!1,color:"#B3A533",icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.aCJ,extras:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.LOCKED_INDICATOR,{icon:react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.K9M,type:_components__WEBPACK_IMPORTED_MODULE_1__.fY.DROPDOWN,contents:[_components__WEBPACK_IMPORTED_MODULE_1__.fY.DELETE_BUTTON,_components__WEBPACK_IMPORTED_MODULE_1__.fY.DEBUG_TOGGLE]}]}}},programData:{"45535153s":{id:"45535153s",name:"MyProgram",type:"programType",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.INSTANCE,properties:{children:["2dfsessfs"]},position:{x:0,y:10},canDelete:!1,canEdit:!0,selected:!1,editing:!1},"655sssefs":{id:"655sssefs",name:"MyFunction",type:"functionType",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.INSTANCE,arguments:["s3siakawme"],properties:{children:[]},position:{x:400,y:10},canDelete:!0,canEdit:!0,selected:!0,editing:!1},s3siakawme:{id:"s3siakawme",name:"Passed Hat",type:"hatType",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.ARGUMENT,canDelete:!0,canEdit:!0,selected:!1,editing:!1},"2dfsessfs":{id:"2dfsessfs",name:"MyOperation",type:"operationType",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.INSTANCE,properties:{hat:null,boot:null,speed:1,doFunky:!0,greeting:"Hello!"},canDelete:!0,canEdit:!0,selected:!1,editing:!1},"6dewwwwww":{id:"6dewwwwww",name:"Sombrero",type:"hatType",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.INSTANCE,canDelete:!0,canEdit:!0,selected:!1,editing:!1},pspssse32:{id:"pspssse32",name:"Fur Boots",type:"bootType",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.INSTANCE,canDelete:!0,canEdit:!0,selected:!1,editing:!1},pspssse64:{id:"pspssse64",name:"Leather Boots",type:"bootType",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.INSTANCE,canDelete:!0,canEdit:!0,selected:!1,editing:!1},sdfsdsq64:{id:"sdfsdsq64",name:"Funky Boots",type:"bootType",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.INSTANCE,canDelete:!0,canEdit:!0,selected:!1,editing:!1},"8423ljdso8s3":{id:"8423ljdso8s3",name:"Magenta Boots",type:"bootType",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.INSTANCE,canDelete:!0,canEdit:!0,selected:!1,editing:!1},"p-pspssse32":{id:"p-pspssse32",name:"Pricy Boots",type:"bootType",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.INSTANCE,canDelete:!0,canEdit:!0,selected:!1,editing:!1},"55pspssse64":{id:"55pspssse64",name:"Fast Boots",type:"bootType",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.INSTANCE,canDelete:!0,canEdit:!0,selected:!1,editing:!1},"6556sdfsdsq64":{id:"6556sdfsdsq64",name:"Jazzy Boots",type:"bootType",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.INSTANCE,canDelete:!0,canEdit:!0,selected:!1,editing:!1},"448423ljdso8s3":{id:"448423ljdso8s3",name:"Cute Boots",type:"bootType",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.INSTANCE,canDelete:!0,canEdit:!0,selected:!1,editing:!1},"45p-pspssse32":{id:"45p-pspssse32",name:"Black Boots",type:"bootType",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.INSTANCE,canDelete:!0,canEdit:!0,selected:!1,editing:!1},bb55pspssse64:{id:"bb55pspssse64",name:"Brown Boots",type:"bootType",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.INSTANCE,canDelete:!0,canEdit:!0,selected:!1,editing:!1},yy6556sdfsdsq64:{id:"yy6556sdfsdsq64",name:"Ugly Boots",type:"bootType",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.INSTANCE,canDelete:!0,canEdit:!0,selected:!1,editing:!1},"44448423ljdso8s3":{id:"44448423ljdso8s3",name:"Ugg Boots",type:"bootType",dataType:_components__WEBPACK_IMPORTED_MODULE_1__.D3.INSTANCE,canDelete:!0,canEdit:!0,selected:!1,editing:!1}}},Stress.parameters=(0,_Users_schoen_Projects_simple_vp_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__.Z)({storySource:{source:"(args) => {\n  const { drawers, objectTypes, programData, drawerWidth, ...otherArgs } = args;\n\n  const [ref, bounds] = useMeasure();\n  \n  useLayoutEffect(()=>{\n    useDefaultProgrammingStore.setState({programSpec:{drawers,objectTypes},programData});\n  })\n  return (\n    <div ref={ref} style={{display:'flex',height:'100vh',flexDirection:'row',backgroundColor:otherArgs.highlightColor}}>\n      <Environment {...otherArgs} store={useDefaultProgrammingStore} height={bounds.height} width={bounds.width} drawerWidth={drawerWidth}/>\n    </div>\n    )\n}"}},Stress.parameters)},"./.storybook/preview.js-generated-config-entry.js":function(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__){"use strict";var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,{parameters:function(){return parameters}});var ClientApi=__webpack_require__("./node_modules/@storybook/client-api/dist/esm/ClientApi.js"),esm=__webpack_require__("./node_modules/@storybook/client-logger/dist/esm/index.js"),parameters={actions:{argTypesRegex:"^on[A-Z].*"},layout:"fullscreen",controls:{matchers:{color:/(background|color)$/i,date:/Date$/}}};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":case"argTypes":return esm.kg.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify(value));case"decorators":return value.forEach((function(decorator){return(0,ClientApi.$9)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return(0,ClientApi.HZ)(loader,!1)}));case"parameters":return(0,ClientApi.h1)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return(0,ClientApi.My)(enhancer)}));case"argsEnhancers":return value.forEach((function(enhancer){return(0,ClientApi._C)(enhancer)}));case"render":return(0,ClientApi.$P)(value);case"globals":case"globalTypes":var v={};return v[key]=value,(0,ClientApi.h1)(v,!1);case"decorateStory":case"renderToDOM":return null;default:return console.log(key+" was not supported :( !")}}))},"./src/components/Constants.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{D3:function(){return DATA_TYPES},vK:function(){return TYPES},fY:function(){return EXTRA_TYPES},Rb:function(){return SIMPLE_PROPERTY_TYPES}});var DATA_TYPES={INSTANCE:0,REFERENCE:1,CALL:2,ARGUMENT:3},TYPES={OBJECT:0,FUNCTION:1},EXTRA_TYPES={LOCKED_INDICATOR:0,NAME_EDIT_TOGGLE:1,SELECTION_TOGGLE:2,COLLAPSE_TOGGLE:3,FUNCTION_BUTTON:4,INDICATOR:5,DROPDOWN:6,DELETE_BUTTON:7,ADD_ARGUMENT:8,ADD_ARGUMENT_GROUP:9,DEBUG_TOGGLE:10},SIMPLE_PROPERTY_TYPES={BOOLEAN:0,NUMBER:1,STRING:2,OPTIONS:3,IGNORED:4}},"./src/components/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{D3:function(){return Constants.D3},fY:function(){return Constants.fY},qA:function(){return Environment},vK:function(){return Constants.vK},y6:function(){return useDefaultProgrammingStore}});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),toConsumableArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),esm=__webpack_require__("./node_modules/zustand/esm/index.js"),immer_esm=__webpack_require__("./node_modules/immer/dist/immer.esm.js"),v4=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js"),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),Constants=__webpack_require__("./src/components/Constants.js"),instanceTemplateFromSpec=function instanceTemplateFromSpec(type,objectSpec,isArg){var _objectSpec$instanceB,_objectSpec$instanceB2,data={id:type,type:type,dataType:Constants.D3.INSTANCE,properties:{},name:"".concat(null!==(_objectSpec$instanceB=objectSpec.instanceBlock)&&void 0!==_objectSpec$instanceB&&_objectSpec$instanceB.hideNewPrefix?"":"New ").concat(objectSpec.name).concat(isArg?" Argument":""),canDelete:!0,canEdit:!0,editing:!1,selected:!1};return objectSpec.properties&&Object.entries(objectSpec.properties).forEach((function(_ref){var _ref2=(0,slicedToArray.Z)(_ref,2),propKey=_ref2[0],propInfo=_ref2[1];data.properties[propKey]=propInfo.default})),null!==(_objectSpec$instanceB2=objectSpec.instanceBlock)&&void 0!==_objectSpec$instanceB2&&_objectSpec$instanceB2.onCanvas&&(data.position={x:0,y:0}),data},referenceTemplateFromSpec=function referenceTemplateFromSpec(type,instanceReference,objectSpec){var data={id:type,type:type,ref:instanceReference.id,dataType:Constants.D3.REFERENCE,name:instanceReference.name,canDelete:!0,canEdit:!0,editing:!1,selected:!1};return objectSpec.referenceBlock.onCanvas&&(data.position={x:0,y:0}),data},randInt8=function randInt8(){return Math.floor(256*Math.random())},DEFAULT_PROGRAM_SPEC={drawers:[],objectTypes:{}},generateUuid=function generateUuid(type){return"".concat(type,"-").concat((0,v4.Z)())};function deleteFromChildren(state,idsToDelete,parentData){if(parentData.dataType===Constants.D3.CALL){var _Object$keys;null===(_Object$keys=Object.keys(parentData.properties))||void 0===_Object$keys||_Object$keys.forEach((function(propName){var _state$programData$pa;idsToDelete.includes(null===(_state$programData$pa=state.programData[parentData.properties[propName]])||void 0===_state$programData$pa?void 0:_state$programData$pa.ref)&&(delete state.programData[parentData.properties[propName]],state.programData[parentData.id].properties[propName]=null)}));for(var i=0;i<idsToDelete.length;i++)delete state.programData[parentData.id].properties[idsToDelete[i]]}else{var _state$programSpec$ob;null!==(_state$programSpec$ob=state.programSpec.objectTypes[parentData.type])&&void 0!==_state$programSpec$ob&&_state$programSpec$ob.properties&&Object.keys(state.programSpec.objectTypes[parentData.type].properties).forEach((function(propName){if(propName){var _state$programData$pa2,property=state.programSpec.objectTypes[parentData.type].properties[propName];if(property&&(property.type||property.type===Constants.vK.OBJECT));else if(property&&property.isList){parentData.properties[propName].forEach((function(child){state=deleteFromChildren(state,idsToDelete,state.programData[child])}));for(var _loop=function _loop(_i){(0,lodash.remove)(state.programData[parentData.id].properties[propName],(function(field){var _state$programData$fi;return(null===(_state$programData$fi=state.programData[field])||void 0===_state$programData$fi?void 0:_state$programData$fi.ref)===idsToDelete[_i]}))},_i=0;_i<idsToDelete.length;_i++)_loop(_i)}else property&&parentData.properties[propName]&&idsToDelete.includes(null===(_state$programData$pa2=state.programData[parentData.properties[propName]])||void 0===_state$programData$pa2?void 0:_state$programData$pa2.ref)&&(delete state.programData[parentData.properties[propName]],state.programData[parentData.id].properties[propName]=null)}}))}return state}function deleteSelfBlock(state,data,parentId,fieldInfo){var _data$typeSpec;if((null===(_data$typeSpec=data.typeSpec)||void 0===_data$typeSpec?void 0:_data$typeSpec.type)===Constants.vK.FUNCTION){var callReferences=(0,lodash.pickBy)(state.programData,(function(entry){return entry.dataType===Constants.D3.CALL&&entry.refData.id===data.id})),callIds=Object.keys(callReferences);Object.keys(state.programData).forEach((function(entryId){var entry=state.programData[entryId];state.programSpec.objectTypes[entry.type].properties&&Object.keys(state.programSpec.objectTypes[entry.type].properties).forEach((function(propName){if(propName){var property=state.programSpec.objectTypes[entry.type].properties[propName];if(property&&(property.type||property.type===Constants.vK.OBJECT));else if(property&&property.isList)for(var _loop2=function _loop2(i){var _entry$properties$pro;null!==(_entry$properties$pro=entry.properties[propName])&&void 0!==_entry$properties$pro&&_entry$properties$pro.includes(callIds[i])&&(0,lodash.remove)(state.programData[entryId].properties[propName],(function(field){return field===callIds[i]}))},i=0;i<callIds.length;i++)_loop2(i);else property&&entry.properties[propName]&&callIds.includes(entry.properties[propName])&&(entry.properties[propName]=null,state.programData[entryId].properties[propName]=null)}}))})),callIds.forEach((function(reference){delete(state=deleteChildren(state,state.programData[reference])).programData[reference]}))}else if(null!=fieldInfo&&fieldInfo.isSpawner){var _state$programData$pa3,_state$programData$pa4;if("spawner"===parentId)delete(state=function deleteFromProgram(state,idsToDelete){var searches=(0,lodash.pickBy)(state.programData,(function(entry){return entry.dataType===Constants.D3.INSTANCE}));return Object.keys(searches).forEach((function(entry){state.programData[entry]&&(state=deleteFromChildren(state,idsToDelete,state.programData[entry]))})),state}(state,[data.ref])).programData[data.ref];else if(null!==(_state$programData$pa3=(state=deleteFromChildren(state,[data.ref],state.programData[parentId])).programData[parentId])&&void 0!==_state$programData$pa3&&_state$programData$pa3.arguments)(0,lodash.remove)(null===(_state$programData$pa4=state.programData[parentId])||void 0===_state$programData$pa4?void 0:_state$programData$pa4.arguments,(function(field){return field===data.ref}))}return delete state.programData[data.id],state}function deleteChildren(state,data,parentId,fieldInfo){return data.arguments&&data.arguments.forEach((function(argumentId){delete state.programData[argumentId]})),state.programSpec.objectTypes[data.type].properties&&Object.keys(state.programSpec.objectTypes[data.type].properties).forEach((function(propName){if(propName){var property=state.programSpec.objectTypes[data.type].properties[propName];property&&(property.type||property.type===Constants.vK.OBJECT)||(property&&property.isList?data.properties[propName]&&data.properties[propName].forEach((function(child){state=deleteSelfBlock(state=deleteChildren(state,state.programData[child],parentId,fieldInfo),state.programData[child],parentId,fieldInfo)})):property&&data.properties[propName]&&delete state.programData[data.properties[propName]])}})),state}var ImmerProgrammingSlice=function immer(config){return function(set,get,api){return config((function(partial,replace){var nextState="function"==typeof partial?(0,immer_esm.ZP)(partial):partial;return set(nextState,replace)}),get,api)}}((function ProgrammingSlice(set,get){return{activeDrawer:null,setActiveDrawer:function setActiveDrawer(activeDrawer){return set({activeDrawer:activeDrawer})},programSpec:DEFAULT_PROGRAM_SPEC,programData:{},transferBlock:function transferBlock(data,sourceInfo,destInfo){console.log({sourceInfo:sourceInfo,destInfo:destInfo}),set((function(state){var _sourceInfo$fieldInfo,newSpawn=!1,id=data.id;state.programData[data.id]||(id=generateUuid(data.type),state.programData[id]=(0,objectSpread2.Z)((0,objectSpread2.Z)({},data),{},{id:id}),newSpawn=!0);var sourceIsList=null===(_sourceInfo$fieldInfo=sourceInfo.fieldInfo)||void 0===_sourceInfo$fieldInfo?void 0:_sourceInfo$fieldInfo.isList,destIsList=destInfo.fieldInfo.isList;destIsList&&sourceIsList&&sourceInfo.parentId===destInfo.parentId?state.programData[destInfo.parentId].properties[destInfo.fieldInfo.value]=function move(array,moveIndex,toIndex){var item=array[moveIndex],length=array.length,diff=moveIndex-toIndex;if(diff>0)return[].concat((0,toConsumableArray.Z)(array.slice(0,toIndex)),[item],(0,toConsumableArray.Z)(array.slice(toIndex,moveIndex)),(0,toConsumableArray.Z)(array.slice(moveIndex+1,length)));if(diff<0){var targetIndex=toIndex+1;return[].concat((0,toConsumableArray.Z)(array.slice(0,moveIndex)),(0,toConsumableArray.Z)(array.slice(moveIndex+1,targetIndex)),[item],(0,toConsumableArray.Z)(array.slice(targetIndex,length)))}return array}(state.programData[destInfo.parentId].properties[destInfo.fieldInfo.value],sourceInfo.idx,destInfo.idx):(destIsList?state.programData[destInfo.parentId].properties[destInfo.fieldInfo.value].splice(destInfo.idx,0,id):state.programData[destInfo.parentId].properties[destInfo.fieldInfo.value]=id,(newSpawn||sourceInfo.parentId!==destInfo.parentId||sourceInfo.fieldInfo!==destInfo.fieldInfo)&&(!newSpawn&&sourceIsList?state.programData[sourceInfo.parentId].properties[destInfo.fieldInfo.value].splice(sourceInfo.idx,1):newSpawn||sourceIsList||(console.log("removing from previous by setting to null"),state.programData[sourceInfo.parentId].properties[sourceInfo.fieldInfo.value]=null)))}))},moveBlock:function moveBlock(changes){return set((function(state){changes.forEach((function(change){change.dragging&&state.programData[change.id]&&(state.programData[change.id].position=change.position)}))}))},deleteBlock:function deleteBlock(data,parentId,fieldInfo){set((function(state){state=deleteSelfBlock(state=deleteChildren(state,data,parentId,fieldInfo),data,parentId,fieldInfo),"spawner"!==parentId&&(parentId&&fieldInfo&&!fieldInfo.isList?state.programData[parentId].properties[fieldInfo.value]=null:parentId&&fieldInfo&&fieldInfo.isList&&(0,lodash.remove)(state.programData[parentId].properties[fieldInfo.value],(function(entry){return entry===data.id})))}))},createPlacedBlock:function createPlacedBlock(data,x,y){set((function(state){var id=data.id;state.programData[data.id]||(id=generateUuid(data.type),state.programData[id]=(0,objectSpread2.Z)((0,objectSpread2.Z)({},data),{},{id:id})),state.programData[id].position={x:x,y:y}}))},addInstance:function addInstance(instanceType){set((function(state){var id=generateUuid(instanceType),template=(0,objectSpread2.Z)((0,objectSpread2.Z)({},instanceTemplateFromSpec(instanceType,state.programSpec.objectTypes[instanceType],!1)),{},{id:id,dataType:Constants.D3.INSTANCE});state.programData[id]=template}))},addArgument:function addArgument(parentFunctionId,argumentType){set((function(state){var id=generateUuid(argumentType),template=(0,objectSpread2.Z)((0,objectSpread2.Z)({},instanceTemplateFromSpec(argumentType,state.programSpec.objectTypes[argumentType],!0)),{},{id:id,dataType:Constants.D3.REFERENCE});state.programData[id]=template,state.programData[parentFunctionId].arguments.push(id)}))},updateItemName:function updateItemName(id,value){set((function(state){var item=state.programData[id],usedId=item.dataType===Constants.D3.REFERENCE||item.dataType===Constants.D3.CALL?item.ref:id;state.programData[usedId].name=value}))},updateItemSelected:function updateItemSelected(id,value){set((function(state){var item=state.programData[id],usedId=item.dataType===Constants.D3.REFERENCE||item.dataType===Constants.D3.CALL?item.ref:id;state.programData[usedId].selected=value}))},updateItemEditing:function updateItemEditing(id,value){set((function(state){state.programData[id].editing=value}))},updateItemSimpleProperty:function updateItemSimpleProperty(id,property,value){set((function(state){state.programData[id].properties[property]=value}))},updateItemBlockColors:function updateItemBlockColors(data){set((function(state){var color=function randomColor(){return"rgb(".concat(randInt8(),",").concat(randInt8(),",").concat(randInt8(),")")}();["instanceBlock","referenceBlock","callBlock"].forEach((function(blockType){state.programSpec.objectTypes[data.type][blockType]&&(state.programSpec.objectTypes[data.type][blockType].color=color)}))}))}}})),useDefaultProgrammingStore=(0,esm.Z)(ImmerProgrammingSlice),react=__webpack_require__("./node_modules/react/index.js"),objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),ReactFlow_esm=__webpack_require__("./node_modules/react-flow-renderer/dist/ReactFlow.esm.js"),useDrop=__webpack_require__("./node_modules/react-dnd/dist/esm/hooks/useDrop/useDrop.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),ProgrammingContext=(0,react.createContext)(),useProgrammingStore=function useProgrammingStore(selector,equalityFn){var store=(0,react.useContext)(ProgrammingContext);return(0,esm.o)(store,selector,equalityFn)},ProgrammingProvider=function ProgrammingProvider(_ref){var store=_ref.store,children=_ref.children;return(0,jsx_runtime.jsx)(ProgrammingContext.Provider,{value:store||useDefaultProgrammingStore,children:children})};ProgrammingProvider.__docgenInfo={description:"",methods:[],displayName:"ProgrammingProvider"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ProgrammingContext.jsx"]={name:"ProgrammingProvider",docgenInfo:ProgrammingProvider.__docgenInfo,path:"src/components/ProgrammingContext.jsx"});var useDrag=__webpack_require__("./node_modules/react-dnd/dist/esm/hooks/useDrag/useDrag.js"),getEmptyImage=__webpack_require__("./node_modules/react-dnd-html5-backend/dist/esm/getEmptyImage.js"),transferBlockSelector=function transferBlockSelector(state){return state.transferBlock},DropRegion=function DropRegion(_ref){var _dropProps$item,_dropProps$item$data,_dropProps$item2,id=_ref.id,parentId=_ref.parentId,fieldInfo=_ref.fieldInfo,idx=_ref.idx,minHeight=_ref.minHeight,hideText=_ref.hideText,disabled=_ref.disabled,highlightColor=_ref.highlightColor,context=_ref.context,showBuffer=_ref.showBuffer,transferBlock=useProgrammingStore(transferBlockSelector),data=useProgrammingStore((0,react.useCallback)((function(store){return store.programData[id]}),[id])),_useDrop=(0,useDrop.L)((function(){return{accept:fieldInfo.accepts,drop:function drop(item,_){console.log(item),transferBlock(item.data,item,{fieldInfo:fieldInfo,parentId:parentId,idx:idx})},canDrop:function canDrop(item){return!disabled&&!item.onCanvas&&(0,lodash.isEqual)((0,lodash.intersection)(context,item.context),item.context)},collect:function collect(monitor){return{isOver:monitor.isOver(),item:monitor.getItem()}}}}),[fieldInfo,parentId,idx,disabled]),_useDrop2=(0,slicedToArray.Z)(_useDrop,2),dropProps=_useDrop2[0],drop=_useDrop2[1],validDropType=fieldInfo.accepts.includes(null===(_dropProps$item=dropProps.item)||void 0===_dropProps$item||null===(_dropProps$item$data=_dropProps$item.data)||void 0===_dropProps$item$data?void 0:_dropProps$item$data.type)&&!(null!==(_dropProps$item2=dropProps.item)&&void 0!==_dropProps$item2&&_dropProps$item2.onCanvas)&&(0,lodash.isEqual)((0,lodash.intersection)(context,dropProps.item.context),dropProps.item.context);console.log({validDropType:validDropType,disabled:disabled});var renderedData=data||(dropProps.item&&validDropType&&!disabled&&dropProps.isOver?dropProps.item.data:null),isPreview=renderedData&&renderedData!==data;return(0,jsx_runtime.jsx)("div",{className:"nodrag",ref:drop,style:{borderRadius:4,backgroundColor:dropProps.isOver&&validDropType?"#44884488":validDropType?"#88888888":null,minHeight:minHeight,minWidth:100,display:"flex",flex:1},children:renderedData&&!isPreview?(0,jsx_runtime.jsx)(Block,{staticData:renderedData,idx:idx,parentId:parentId,fieldInfo:fieldInfo,bounded:!0,highlightColor:highlightColor,context:context}):renderedData?(0,jsx_runtime.jsx)(PreviewBlock,{staticData:renderedData,idx:idx,parentId:parentId,fieldInfo:fieldInfo,bounded:!0,highlightColor:highlightColor,context:context,style:{marginBottom:showBuffer?minHeight:null,marginTop:showBuffer?minHeight:null}}):hideText?null:fieldInfo.name})};DropRegion.__docgenInfo={description:"",methods:[],displayName:"DropRegion"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Block/DropRegion.jsx"]={name:"DropRegion",docgenInfo:DropRegion.__docgenInfo,path:"src/components/Block/DropRegion.jsx"});var DropZone=function DropZone(_ref){var id=_ref.id,parentId=_ref.parentId,fieldInfo=_ref.fieldInfo,idx=_ref.idx,interactionDisabled=_ref.interactionDisabled,highlightColor=_ref.highlightColor,context=_ref.context;return(0,jsx_runtime.jsx)("div",{className:"nodrag",style:{padding:4,backgroundColor:"#00000088",borderRadius:3,minHeight:30,minWidth:"max-content",margin:4,flex:1},children:(0,jsx_runtime.jsx)(DropRegion,{id:id,parentId:parentId,fieldInfo:fieldInfo,idx:idx,minHeight:30,bounded:!0,disabled:id||interactionDisabled,highlightColor:highlightColor,context:context})})};DropZone.__docgenInfo={description:"",methods:[],displayName:"DropZone"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Block/DropZone.jsx"]={name:"DropZone",docgenInfo:DropZone.__docgenInfo,path:"src/components/Block/DropZone.jsx"});var List=function List(_ref){var ids=_ref.ids,parentId=_ref.parentId,fieldInfo=_ref.fieldInfo,interactionDisabled=_ref.interactionDisabled,highlightColor=_ref.highlightColor,context=_ref.context,minHeight=0===ids.length?30:8;return(0,jsx_runtime.jsxs)("div",{className:"nodrag",style:{padding:4,backgroundColor:"#00000088",borderRadius:3,minHeight:30,minWidth:100,margin:4,flex:1},children:[(0,jsx_runtime.jsx)(DropRegion,{id:null,parentId:parentId,fieldInfo:fieldInfo,idx:0,minHeight:minHeight,disabled:interactionDisabled,hideText:!0,highlightColor:highlightColor,context:context},"initial"),ids.map((function(id,idx){return(0,jsx_runtime.jsx)(Block,{id:id,parentId:parentId,fieldInfo:fieldInfo,idx:idx,bounded:!0,highlightColor:highlightColor,context:context,after:(0,jsx_runtime.jsx)(DropRegion,{id:null,parentId:parentId,fieldInfo:fieldInfo,idx:idx+1,minHeight:8,hideText:!0,disabled:interactionDisabled,highlightColor:highlightColor,context:context},"dropzone-".concat(idx))},id)}))]})};List.__docgenInfo={description:"",methods:[],displayName:"List"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Block/List.jsx"]={name:"List",docgenInfo:List.__docgenInfo,path:"src/components/Block/List.jsx"});var index_esm=__webpack_require__("./node_modules/react-icons/fi/index.esm.js"),ThemeContext=__webpack_require__("./node_modules/grommet/es6/contexts/ThemeContext/ThemeContext.js"),TextInput=__webpack_require__("./node_modules/grommet/es6/components/TextInput/TextInput.js"),Box=__webpack_require__("./node_modules/grommet/es6/components/Box/Box.js"),Text=__webpack_require__("./node_modules/grommet/es6/components/Text/Text.js"),Button=__webpack_require__("./node_modules/grommet/es6/components/Button/Button.js"),CheckBox=__webpack_require__("./node_modules/grommet/es6/components/CheckBox/CheckBox.js"),RadioButtonGroup=__webpack_require__("./node_modules/grommet/es6/components/RadioButtonGroup/RadioButtonGroup.js"),DropButton=__webpack_require__("./node_modules/grommet/es6/components/DropButton/DropButton.js"),react_spring_web_esm=__webpack_require__("./node_modules/@react-spring/web/dist/react-spring-web.esm.js"),react_spring_esm=__webpack_require__("./node_modules/react-spring/dist/react-spring.esm.js"),ExpandCarrot=function ExpandCarrot(_ref){var expanded=_ref.expanded,carrotStyle=(0,react_spring_web_esm.useSpring)({rotate:expanded?"90deg":"0deg",config:react_spring_esm.config.wobbly,height:20,width:20});return(0,jsx_runtime.jsx)(react_spring_web_esm.q.div,{style:carrotStyle,children:(0,jsx_runtime.jsx)(index_esm.Tfp,{})})};ExpandCarrot.__docgenInfo={description:"",methods:[],displayName:"ExpandCarrot"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Block/ExpandCarrot.jsx"]={name:"ExpandCarrot",docgenInfo:ExpandCarrot.__docgenInfo,path:"src/components/Block/ExpandCarrot.jsx"});var Pill=function Pill(_ref){var value=_ref.value;return(0,jsx_runtime.jsx)("div",{style:{borderRadius:20,minWidth:9,backgroundColor:"#00000022",paddingLeft:7,paddingRight:7,borderStyle:"solid",borderColor:"#00000088",borderWidth:1,textAlign:"center",fontSize:10},children:value})},FunctionButtonExtra=function FunctionButtonExtra(_ref2){var actionInfo=_ref2.actionInfo,data=_ref2.data,blockSpec=_ref2.blockSpec,inTopLevel=_ref2.inTopLevel,interactionDisabled=_ref2.interactionDisabled,_onClick=useProgrammingStore((0,react.useCallback)((function(state){return"function"==typeof actionInfo.onClick?actionInfo.onClick:state[actionInfo.onClick]}),[actionInfo])),ExtraActionIcon=actionInfo.icon?actionInfo.icon:index_esm.Q8x;return(0,jsx_runtime.jsx)(Button.z,{size:"small",focusIndicator:!1,hoverIndicator:!1,disabled:interactionDisabled,plain:!0,style:{padding:inTopLevel?null:"5pt 10pt 5pt 10pt"},icon:(0,jsx_runtime.jsx)(ExtraActionIcon,{}),label:inTopLevel?null:actionInfo.label,onClick:function onClick(){return _onClick(data,blockSpec)}})},LockIndicatorExtra=function LockIndicatorExtra(_ref3){var locked=_ref3.locked,inTopLevel=_ref3.inTopLevel,Icon=locked?index_esm.UIZ:index_esm.PdD;return(0,jsx_runtime.jsx)(Button.z,{size:"small",plain:!0,focusIndicator:!1,hoverIndicator:!1,disabled:!0,style:{padding:inTopLevel?"5pt 2pt 5pt 2pt":"5pt 10pt 5pt 10pt"},icon:(0,jsx_runtime.jsx)(Icon,{}),label:inTopLevel?null:locked?"Locked":"Unlocked"})},NameEditToggleExtra=function NameEditToggleExtra(_ref4){var isEditing=_ref4.isEditing,setIsEditing=_ref4.setIsEditing,locked=_ref4.locked,inTopLevel=_ref4.inTopLevel,Icon=isEditing?index_esm.mW3:index_esm.Nte;return(0,jsx_runtime.jsx)(Button.z,{size:"small",plain:!0,focusIndicator:!1,hoverIndicator:!1,disabled:locked,style:{padding:inTopLevel?"5pt 2pt 5pt 2pt":"5pt 10pt 5pt 10pt"},icon:(0,jsx_runtime.jsx)(Icon,{}),label:inTopLevel?null:isEditing?"Save":"Edit Name",onClick:function onClick(){return setIsEditing(!isEditing)}})},SelectionToggleExtra=function SelectionToggleExtra(_ref5){var isSelected=_ref5.isSelected,setIsSelected=_ref5.setIsSelected,inTopLevel=_ref5.inTopLevel,Icon=isSelected?index_esm.rzC:index_esm.rDJ;return(0,jsx_runtime.jsx)(Button.z,{plain:!0,focusIndicator:!1,hoverIndicator:!1,size:"small",style:{padding:inTopLevel?"5pt 2pt 5pt 2pt":"5pt 10pt 5pt 10pt"},icon:(0,jsx_runtime.jsx)(Icon,{}),label:inTopLevel?null:isSelected?"Deselect":"Select",onClick:function onClick(){return setIsSelected(!isSelected)}})},CollapseToggleExtra=function CollapseToggleExtra(_ref6){var isCollapsed=_ref6.isCollapsed,setIsCollapsed=_ref6.setIsCollapsed,inTopLevel=_ref6.inTopLevel;return(0,jsx_runtime.jsx)(Button.z,{plain:!0,focusIndicator:!1,hoverIndicator:!1,size:"small",style:{padding:inTopLevel?"5pt 2pt 5pt 2pt":"5pt 10pt 5pt 10pt"},icon:(0,jsx_runtime.jsx)(ExpandCarrot,{expanded:!isCollapsed}),onClick:function onClick(){return setIsCollapsed(!isCollapsed)},label:inTopLevel?null:isCollapsed?"Expand":"Collapse"})},DebugToggleExtra=function DebugToggleExtra(_ref7){var isDebugging=_ref7.isDebugging,setIsDebugging=_ref7.setIsDebugging,inTopLevel=_ref7.inTopLevel,Icon=isDebugging?index_esm.ti2:index_esm.Wqx;return(0,jsx_runtime.jsx)(Button.z,{plain:!0,focusIndicator:!1,hoverIndicator:!1,size:"small",style:{padding:inTopLevel?"5pt 2pt 5pt 2pt":"5pt 10pt 5pt 10pt"},icon:(0,jsx_runtime.jsx)(Icon,{}),onClick:function onClick(){return setIsDebugging(!isDebugging)},label:inTopLevel?null:isDebugging?"Cancel Debug":"Debug"})},IndicatorExtra=function IndicatorExtra(_ref8){var value=_ref8.value,label=_ref8.label,inTopLevel=_ref8.inTopLevel;return inTopLevel?(0,jsx_runtime.jsx)(Pill,{value:value}):(0,jsx_runtime.jsx)(Button.z,{size:"small",plain:!0,focusIndicator:!1,hoverIndicator:!1,style:{padding:inTopLevel?"5pt 2pt 5pt 2pt":"5pt 10pt 5pt 10pt"},icon:(0,jsx_runtime.jsx)(Pill,{value:value}),label:label})},AddArgumentExtra=function AddArgumentExtra(_ref9){var _typeSpec$referenceBl,data=_ref9.data,argumentType=_ref9.argumentType,interactionDisabled=_ref9.interactionDisabled,inTopLevel=_ref9.inTopLevel,typeSpec=useProgrammingStore((0,react.useCallback)((function(store){return store.programSpec.objectTypes[argumentType]}),[argumentType])),Icon=null!=typeSpec&&null!==(_typeSpec$referenceBl=typeSpec.referenceBlock)&&void 0!==_typeSpec$referenceBl&&_typeSpec$referenceBl.icon?typeSpec.referenceBlock.icon:index_esm.OvN,addArgument=useProgrammingStore((function(store){return store.addArgument}));return(0,jsx_runtime.jsx)(Button.z,{size:"small",plain:!0,focusIndicator:!1,hoverIndicator:!1,disabled:interactionDisabled,style:{padding:inTopLevel?"5pt 2pt 5pt 2pt":"5pt 10pt 5pt 10pt"},icon:(0,jsx_runtime.jsx)(Icon,{}),onClick:function onClick(){return addArgument(data.id,argumentType)},label:inTopLevel?null:"Add ".concat(typeSpec.name," Argument")})},AddArgumentGroupExtra=function AddArgumentGroupExtra(_ref10){var data=_ref10.data,allowed=_ref10.allowed,interactionDisabled=_ref10.interactionDisabled,inTopLevel=_ref10.inTopLevel;return(0,jsx_runtime.jsx)(DropdownExtra,{icon:index_esm.OvN,label:"Add Argument",contents:allowed.map((function(argumentType){return{type:Constants.fY.ADD_ARGUMENT,argumentType:argumentType}})),inTopLevel:inTopLevel,data:data,interactionDisabled:interactionDisabled})},DeleteExtra=function DeleteExtra(_ref11){var _data$refData,data=_ref11.data,inTopLevel=_ref11.inTopLevel,locked=_ref11.locked,fieldInfo=_ref11.fieldInfo,parentId=_ref11.parentId,deleteFunc=useProgrammingStore((function(state){return state.deleteBlock})),canDeleteInstance="spawner"===parentId&&data.dataType===Constants.D3.REFERENCE&&(null===(_data$refData=data.refData)||void 0===_data$refData?void 0:_data$refData.canDelete),canDelete=!locked&&data.canDelete||canDeleteInstance;return(0,jsx_runtime.jsx)(Button.z,{size:"small",plain:!0,focusIndicator:!1,hoverIndicator:!1,disabled:!canDelete,style:{padding:inTopLevel?"5pt 2pt 5pt 2pt":"5pt 10pt 5pt 10pt"},icon:(0,jsx_runtime.jsx)(index_esm.Ybf,{}),label:inTopLevel?null:"Delete",onClick:function onClick(){return deleteFunc(data,parentId,fieldInfo)}})},DropdownExtra=function DropdownExtra(_ref12){var icon=_ref12.icon,contents=_ref12.contents,label=_ref12.label,inTopLevel=_ref12.inTopLevel,data=_ref12.data,blockSpec=_ref12.blockSpec,isEditing=_ref12.isEditing,isCollapsed=_ref12.isCollapsed,isSelected=_ref12.isSelected,isDebugging=_ref12.isDebugging,setIsEditing=_ref12.setIsEditing,setIsCollapsed=_ref12.setIsCollapsed,setIsSelected=_ref12.setIsSelected,setIsDebugging=_ref12.setIsDebugging,interactionDisabled=_ref12.interactionDisabled,parentId=_ref12.parentId,fieldInfo=_ref12.fieldInfo,DropIcon=icon||index_esm.K9M;return(0,jsx_runtime.jsx)(DropButton.h,{focusIndicator:!1,hoverIndicator:!1,dropContent:(0,jsx_runtime.jsx)(Box.x,{round:"xsmall",background:"grey",direction:"column",align:"start",border:{color:"lightgrey"},children:null==contents?void 0:contents.map((function(feature,featureIdx){return(0,jsx_runtime.jsx)(ButtonSwitch,{feature:feature,data:data,blockSpec:blockSpec,inTopLevel:!1,isEditing:isEditing,isCollapsed:isCollapsed,isSelected:isSelected,isDebugging:isDebugging,setIsEditing:setIsEditing,setIsCollapsed:setIsCollapsed,setIsSelected:setIsSelected,setIsDebugging:setIsDebugging,interactionDisabled:interactionDisabled,fieldInfo:fieldInfo,parentId:parentId},featureIdx)}))}),dropProps:{align:inTopLevel?{top:"bottom"}:{left:"right"},elevation:"none",background:"none"},children:(0,jsx_runtime.jsx)(Button.z,{size:"small",as:"div",focusIndicator:!1,hoverIndicator:!1,plain:!0,style:{padding:inTopLevel?"5pt 2pt 5pt 2pt":"5pt 10pt 5pt 10pt"},icon:(0,jsx_runtime.jsx)(DropIcon,{}),label:inTopLevel?null:label})})},ButtonSwitch=function ButtonSwitch(_ref13){var data=_ref13.data,blockSpec=_ref13.blockSpec,isEditing=_ref13.isEditing,setIsEditing=_ref13.setIsEditing,isCollapsed=_ref13.isCollapsed,setIsCollapsed=_ref13.setIsCollapsed,isSelected=_ref13.isSelected,setIsSelected=_ref13.setIsSelected,isDebugging=_ref13.isDebugging,setIsDebugging=_ref13.setIsDebugging,interactionDisabled=_ref13.interactionDisabled,inTopLevel=_ref13.inTopLevel,feature=_ref13.feature,fieldInfo=_ref13.fieldInfo,parentId=_ref13.parentId;return feature===Constants.fY.LOCKED_INDICATOR?(0,jsx_runtime.jsx)(LockIndicatorExtra,{locked:!data.canEdit,inTopLevel:inTopLevel,interactionDisabled:interactionDisabled}):feature===Constants.fY.NAME_EDIT_TOGGLE?(0,jsx_runtime.jsx)(NameEditToggleExtra,{isEditing:isEditing,setIsEditing:setIsEditing,locked:!data.canEdit,inTopLevel:inTopLevel,interactionDisabled:interactionDisabled}):feature===Constants.fY.COLLAPSE_TOGGLE?(0,jsx_runtime.jsx)(CollapseToggleExtra,{isCollapsed:isCollapsed,setIsCollapsed:setIsCollapsed,inTopLevel:inTopLevel,interactionDisabled:interactionDisabled}):feature===Constants.fY.SELECTION_TOGGLE?(0,jsx_runtime.jsx)(SelectionToggleExtra,{isSelected:isSelected,setIsSelected:setIsSelected,inTopLevel:inTopLevel}):feature===Constants.fY.DEBUG_TOGGLE?(0,jsx_runtime.jsx)(DebugToggleExtra,{isDebugging:isDebugging,setIsDebugging:setIsDebugging,inTopLevel:inTopLevel}):feature===Constants.fY.DELETE_BUTTON?(0,jsx_runtime.jsx)(DeleteExtra,{data:data,inTopLevel:inTopLevel,locked:interactionDisabled,fieldInfo:fieldInfo,parentId:parentId}):(null==feature?void 0:feature.type)===Constants.fY.ADD_ARGUMENT?(0,jsx_runtime.jsx)(AddArgumentExtra,{data:data,argumentType:null==feature?void 0:feature.argumentType,interactionDisabled:interactionDisabled,inTopLevel:inTopLevel}):(null==feature?void 0:feature.type)===Constants.fY.ADD_ARGUMENT_GROUP?(0,jsx_runtime.jsx)(AddArgumentGroupExtra,{data:data,allowed:null==feature?void 0:feature.allowed,interactionDisabled:interactionDisabled,inTopLevel:inTopLevel}):(null==feature?void 0:feature.type)===Constants.fY.FUNCTION_BUTTON?(0,jsx_runtime.jsx)(FunctionButtonExtra,{actionInfo:feature,data:data,blockSpec:blockSpec,interactionDisabled:interactionDisabled,inTopLevel:inTopLevel}):(null==feature?void 0:feature.type)===Constants.fY.INDICATOR?(0,jsx_runtime.jsx)(IndicatorExtra,{value:feature.accessor(data),label:feature.label,inTopLevel:inTopLevel,interactionDisabled:interactionDisabled}):(null==feature?void 0:feature.type)===Constants.fY.ADD_ARGUMENT?(0,jsx_runtime.jsx)(AddArgumentGroupExtra,{data:data,allowed:null==feature?void 0:feature.allowed,interactionDisabled:interactionDisabled,inTopLevel:inTopLevel}):(null==feature?void 0:feature.type)===Constants.fY.DROPDOWN?(0,jsx_runtime.jsx)(DropdownExtra,{data:data,blockSpec:blockSpec,icon:null==feature?void 0:feature.icon,contents:null==feature?void 0:feature.contents,label:null==feature?void 0:feature.label,inTopLevel:inTopLevel,isEditing:isEditing,isCollapsed:isCollapsed,isSelected:isSelected,isDebugging:isDebugging,setIsEditing:setIsEditing,setIsCollapsed:setIsCollapsed,setIsSelected:setIsSelected,setIsDebugging:setIsDebugging,interactionDisabled:interactionDisabled,parentId:parentId,fieldInfo:fieldInfo}):null},ExtraBar=function ExtraBar(_ref14){var _blockSpec$extras,data=_ref14.data,blockSpec=_ref14.blockSpec,isEditing=_ref14.isEditing,setIsEditing=_ref14.setIsEditing,isCollapsed=_ref14.isCollapsed,setIsCollapsed=_ref14.setIsCollapsed,isSelected=_ref14.isSelected,setIsSelected=_ref14.setIsSelected,isDebugging=_ref14.isDebugging,setIsDebugging=_ref14.setIsDebugging,interactionDisabled=_ref14.interactionDisabled,fieldInfo=_ref14.fieldInfo,parentId=_ref14.parentId;return(0,jsx_runtime.jsx)(Box.x,{direction:"row",margin:{left:"xsmall"},gap:"none",align:"center",alignContent:"center",justify:"between",flex:!1,children:null==blockSpec||null===(_blockSpec$extras=blockSpec.extras)||void 0===_blockSpec$extras?void 0:_blockSpec$extras.map((function(extra,extraIdx){return(0,jsx_runtime.jsx)(ButtonSwitch,{data:data,blockSpec:blockSpec,inTopLevel:!0,isEditing:isEditing,isCollapsed:isCollapsed,isSelected:isSelected,isDebugging:isDebugging,setIsEditing:setIsEditing,setIsCollapsed:setIsCollapsed,setIsSelected:setIsSelected,setIsDebugging:setIsDebugging,interactionDisabled:interactionDisabled,feature:extra,fieldInfo:fieldInfo,parentId:parentId},extraIdx)}))})};ExtraBar.__docgenInfo={description:"",methods:[],displayName:"ExtraBar"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Block/ExtraBar.jsx"]={name:"ExtraBar",docgenInfo:ExtraBar.__docgenInfo,path:"src/components/Block/ExtraBar.jsx"});var _templateObject,_templateObject2,taggedTemplateLiteral=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),Selectable=styled_components_browser_esm.default.div(_templateObject2||(_templateObject2=(0,taggedTemplateLiteral.Z)(["\n    animation: "," 2s ease-in-out infinite reverse;\n"])),(function selectKeyframes(props){return(0,styled_components_browser_esm.keyframes)(_templateObject||(_templateObject=(0,taggedTemplateLiteral.Z)(["\n    0% {\n        box-shadow: 0pt 0pt 3pt 1pt ",", 0pt 0pt 2pt 2pt ",", inset 0pt 0pt 1pt 1pt ",", 0pt 0pt 20pt 20pt ",";\n    }\n\n    50% {\n        box-shadow: 0pt 0pt 3pt 1pt ",", 0pt 0pt 2pt 5pt ",", inset 0pt 0pt 1pt 1pt ",", 0pt 0pt 20pt 20pt ",";\n    }\n    \n    100% {\n        box-shadow: 0pt 0pt 3pt 1pt ",", 0pt 0pt 2pt 2pt ",", inset 0pt 0pt 1pt 1pt ",", 0pt 0pt 20pt 20pt ",";\n    }\n"])),props.selected?"rgba(255,255,255,0.5)":"transparent",props.selected?props.highlightColor:"transparent",props.selected?"rgba(0,0,0,0.7)":"transparent",props.selected?"rgba(0,0,0,0.4)":"transparent",props.selected?"rgba(255,255,255,0.5)":"transparent",props.selected?props.highlightColor:"transparent",props.selected?"rgba(0,0,0,0.7)":"transparent",props.selected?"rgba(0,0,0,0.4)":"transparent",props.selected?"rgba(255,255,255,0.5)":"transparent",props.selected?props.highlightColor:"transparent",props.selected?"rgba(0,0,0,0.7)":"transparent",props.selected?"rgba(0,0,0,0.4)":"transparent")})),NumberInput=function NumberInput(_ref){var value=_ref.value,min=_ref.min,max=_ref.max,_onChange=_ref.onChange,disabled=_ref.disabled,style=_ref.style;return(0,jsx_runtime.jsx)(TextInput.o,{disabled:disabled,value:value,type:"number",step:.1,textAlign:"center",style:{fontSize:14,color:(0,lodash.toNumber)(value)>=min&&(0,lodash.toNumber)(value)<=max?null==style?void 0:style.color:"red"},onChange:function onChange(event){_onChange((0,lodash.toNumber)(event.target.value))}})};NumberInput.__docgenInfo={description:"",methods:[],displayName:"NumberInput"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Block/Input.jsx"]={name:"NumberInput",docgenInfo:NumberInput.__docgenInfo,path:"src/components/Block/Input.jsx"});var VisualBlock=(0,react.forwardRef)((function(_ref,ref){var _data$refData,_data$refData2,_data$refData3,_data$refData4,_Object$entries,data=_ref.data,x=_ref.x,y=_ref.y,scale=_ref.scale,typeSpec=_ref.typeSpec,onCanvas=_ref.onCanvas,interactionDisabled=_ref.interactionDisabled,bounded=_ref.bounded,highlightColor=_ref.highlightColor,context=_ref.context,fieldInfo=_ref.fieldInfo,parentId=_ref.parentId,style=_ref.style,blockSpec=data.dataType===Constants.D3.REFERENCE?typeSpec.referenceBlock:data.dataType===Constants.D3.CALL?typeSpec.callBlock:typeSpec.instanceBlock,blockStyle=style||{},_useState=(0,react.useState)(!1),_useState2=(0,slicedToArray.Z)(_useState,2),isCollapsed=_useState2[0],setIsCollapsed=_useState2[1],_useState3=(0,react.useState)(!1),_useState4=(0,slicedToArray.Z)(_useState3,2),isDebugging=_useState4[0],setIsDebugging=_useState4[1],_useState5=(0,react.useState)(!0),_useState6=(0,slicedToArray.Z)(_useState5,2),simplePropertiesCollapsed=_useState6[0],setSimplePropertiesCollapsed=_useState6[1],updateItemName=useProgrammingStore((function(store){return store.updateItemName})),setIsEditing=useProgrammingStore((function(store){return store.updateItemEditing})),setIsSelected=useProgrammingStore((function(store){return store.updateItemSelected})),updateItemSimpleProperty=useProgrammingStore((function(store){return store.updateItemSimpleProperty})),simpleProperties=typeSpec.properties?(0,lodash.pickBy)(typeSpec.properties,(function(entry){return Object.values(Constants.Rb).includes(entry.type)&&entry.type!==Constants.Rb.IGNORED})):{},standardProperties=typeSpec.properties?(0,lodash.omitBy)(typeSpec.properties,(function(entry){return Object.values(Constants.Rb).includes(entry.type)})):{},Icon=blockSpec.icon?blockSpec.icon:index_esm.jxP,name=[Constants.D3.CALL,Constants.D3.REFERENCE].includes(data.dataType)?null==data||null===(_data$refData=data.refData)||void 0===_data$refData?void 0:_data$refData.name:null==data?void 0:data.name,editing=data.editing||(null===(_data$refData2=data.refData)||void 0===_data$refData2?void 0:_data$refData2.editing),selected=data.selected||(null===(_data$refData3=data.refData)||void 0===_data$refData3?void 0:_data$refData3.selected);return(0,jsx_runtime.jsxs)(Selectable,{role:"Handle",selected:selected,highlightColor:highlightColor,className:onCanvas&&blockSpec.onCanvas?null:"nodrag",ref:ref,style:(0,objectSpread2.Z)({minWidth:175,width:bounded?"inherit":"max-content",backgroundColor:blockSpec.color,borderRadius:3,padding:4,flex:bounded?1:null,transform:"translate(".concat(x||0,"px, ").concat(y||0,"px) scale(").concat(scale||1,")"),WebkitTransform:"translate(".concat(x||0,"px, ").concat(y||0,"px) scale(").concat(scale||1,")")},blockStyle),children:[(0,jsx_runtime.jsxs)("div",{style:{margin:4,display:"flex",alignItems:"center"},children:[(0,jsx_runtime.jsx)(ThemeContext.N.Extend,{value:{global:{input:{extend:{backgroundColor:editing?"".concat(highlightColor,"55"):"#FFFFFF55",userSelect:editing?"none":"auto"}},control:{border:{color:editing?highlightColor:null}},edgeSize:{large:"20pt"}}},children:(0,jsx_runtime.jsx)(TextInput.o,(0,objectSpread2.Z)((0,objectSpread2.Z)({},{draggable:!1,onDragStart:function onDragStart(e){return e.stopPropagation()},onDragEnd:function onDragEnd(e){return e.stopPropagation()},onDrag:function onDrag(e){return e.stopPropagation()}}),{},{size:"small",icon:(0,jsx_runtime.jsx)(Icon,{}),value:name,textAlign:"start",focusIndicator:!1,disabled:!(data.editing||null!==(_data$refData4=data.refData)&&void 0!==_data$refData4&&_data$refData4.editing),onChange:function onChange(e){return updateItemName(data.refData?data.refData.id:data.id,e.target.value)}}))}),(null==blockSpec?void 0:blockSpec.extras)&&(0,jsx_runtime.jsx)(ExtraBar,{fieldInfo:fieldInfo,parentId:parentId,interactionDisabled:interactionDisabled,data:data,blockSpec:blockSpec,isEditing:editing,isCollapsed:isCollapsed,isSelected:selected,isDebugging:isDebugging,setIsEditing:data.refData?function(v){return setIsEditing(data.refData.id,v)}:function(v){return setIsEditing(data.id,v)},setIsSelected:data.refData?function(v){return setIsSelected(data.refData.id,v)}:function(v){return setIsSelected(data.id,v)},setIsCollapsed:setIsCollapsed,setIsDebugging:setIsDebugging})]}),!isCollapsed&&(0,jsx_runtime.jsxs)(Box.x,{animation:["fadeIn","zoomIn"],children:[data.dataType===Constants.D3.INSTANCE&&typeSpec.type===Constants.vK.FUNCTION&&data.arguments&&Object.keys(data.arguments).length>0&&(0,jsx_runtime.jsx)(Box.x,{gap:"xsmall",direction:"column",style:{borderRadius:4,display:"flex",margin:4,padding:5,backgroundColor:"rgba(0,0,0,0.2)"},children:data.argumentBlockData.map((function(argBlockData,argIdx){return(0,jsx_runtime.jsx)(Block,{staticData:argBlockData,parentId:data.id,bounded:!0,highlightColor:highlightColor,context:context,fieldInfo:{name:"",value:null,accepts:[],isSpawner:!0}},argIdx)}))}),Object.keys(simpleProperties).length>0&&data.dataType===Constants.D3.INSTANCE&&(0,jsx_runtime.jsxs)(Box.x,{margin:"xsmall",background:"#ffffff50",round:"xxsmall",align:"center",justify:"between",direction:"column",pad:"xsmall",flex:!0,children:[(0,jsx_runtime.jsxs)(Box.x,{direction:"row",align:"center",justify:"between",flex:!0,style:{width:"100%"},children:[(0,jsx_runtime.jsx)(Text.x,{margin:{left:"medium"},children:"Settings"}),(0,jsx_runtime.jsx)(Button.z,{plain:!0,style:{padding:"5pt 10pt 5pt 10pt"},icon:(0,jsx_runtime.jsx)(ExpandCarrot,{expanded:!simplePropertiesCollapsed}),onClick:interactionDisabled?null:function(){return setSimplePropertiesCollapsed(!simplePropertiesCollapsed)}})]}),!simplePropertiesCollapsed&&(0,jsx_runtime.jsx)(Box.x,{flex:!0,animation:["fadeIn","slideDown"],style:{width:"100%"},children:Object.entries(simpleProperties).map((function(_ref2){var _ref3=(0,slicedToArray.Z)(_ref2,2),propKey=_ref3[0],propInfo=_ref3[1];return(0,jsx_runtime.jsxs)(Box.x,{direction:"row",background:"#ffffff50",round:"xsmall",flex:!0,pad:"small",justify:"between",align:"center",margin:{bottom:"xsmall"},children:[(0,jsx_runtime.jsx)(Text.x,{size:"small",color:"#00000088",children:propInfo.name}),propInfo.type===Constants.Rb.BOOLEAN&&(0,jsx_runtime.jsx)(CheckBox.J,{size:"small",focusIndicator:!1,disabled:interactionDisabled,checked:data.properties[propKey],onChange:function onChange(){return updateItemSimpleProperty(data.id,propKey,!data.properties[propKey])}}),propInfo.type===Constants.Rb.NUMBER&&(0,jsx_runtime.jsx)(Box.x,{width:"xsmall",children:(0,jsx_runtime.jsx)(NumberInput,{size:"xsmall",style:{color:"#00000088"},min:void 0!==propInfo.min?propInfo.min:0,max:void 0!==propInfo.max?propInfo.max:10,value:data.properties[propKey],disabled:interactionDisabled,onChange:function onChange(value){return updateItemSimpleProperty(data.id,propKey,value)}})}),propInfo.type===Constants.Rb.STRING&&(0,jsx_runtime.jsx)(Box.x,{width:"xsmall",children:(0,jsx_runtime.jsx)(TextInput.o,{size:"xsmall",textAlign:"center",style:{color:"#00000088"},value:data.properties[propKey],disabled:interactionDisabled,onChange:function onChange(e){return updateItemSimpleProperty(data.id,propKey,e.target.value)}})}),propInfo.type===Constants.Rb.OPTIONS&&(0,jsx_runtime.jsx)(RadioButtonGroup.S,{name:propInfo.name,disabled:interactionDisabled,size:"xsmall",style:{color:"#00000088",fontSize:13},options:propInfo.options,value:data.properties[propKey],onChange:function onChange(e){return updateItemSimpleProperty(data.id,propKey,e.target.value)}})]},propKey)}))})]}),data.dataType===Constants.D3.CALL&&data.argumentBlockData.map((function(argInfo,argIdx){return(0,jsx_runtime.jsxs)(Box.x,{direction:"row",margin:"xsmall",background:"#ffffff20",round:"xxsmall",alignContent:"between",align:"center",justify:"between",flex:!0,children:[(0,jsx_runtime.jsx)(Box.x,{pad:"xsmall",alignContent:"center",align:"center",children:argInfo.name}),(0,jsx_runtime.jsx)(DropZone,{id:data.properties[argInfo.ref],fieldInfo:{name:"",value:argInfo.ref,accepts:[argInfo.type]},parentId:data.id,interactionDisabled:interactionDisabled,highlightColor:highlightColor,context:context})]},argIdx)})),data.dataType===Constants.D3.INSTANCE&&(null===(_Object$entries=Object.entries(standardProperties))||void 0===_Object$entries?void 0:_Object$entries.map((function(_ref4){var _ref5=(0,slicedToArray.Z)(_ref4,2),fieldKey=_ref5[0],fieldInfo=_ref5[1],innerLabel=fieldInfo.fullWidth?"":fieldInfo.name;return(0,jsx_runtime.jsxs)(Box.x,{direction:"row",margin:fieldInfo.fullWidth?"none":"xsmall",background:fieldInfo.fullWidth?null:"#ffffff20",round:"xxsmall",alignContent:"between",align:"center",justify:"between",flex:!0,children:[(0,jsx_runtime.jsx)(Box.x,{pad:fieldInfo.fullWidth?"none":"xsmall",alignContent:"center",align:"center",children:innerLabel}),fieldInfo.isList?(0,jsx_runtime.jsx)(List,{ids:data.properties[fieldKey],fieldInfo:(0,objectSpread2.Z)((0,objectSpread2.Z)({},fieldInfo),{},{value:fieldKey}),parentId:data.id,interactionDisabled:interactionDisabled,highlightColor:highlightColor,context:context}):(0,jsx_runtime.jsx)(DropZone,{id:data.properties[fieldKey],fieldInfo:(0,objectSpread2.Z)((0,objectSpread2.Z)({},fieldInfo),{},{value:fieldKey,name:fieldInfo.fullWidth?fieldInfo.name:""}),parentId:data.id,interactionDisabled:interactionDisabled,highlightColor:highlightColor,context:context})]},fieldKey)})))]}),isDebugging&&(0,jsx_runtime.jsx)(Box.x,{round:"small",pad:"small",background:"#00000044",style:{whiteSpace:"pre",color:"white",fontFamily:"monospace"},children:JSON.stringify((0,objectSpread2.Z)((0,objectSpread2.Z)({},data),{},{interactionDisabled:!!interactionDisabled}),null,"  ")})]})}));VisualBlock.__docgenInfo={description:"",methods:[],displayName:"VisualBlock"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Block/VisualBlock.jsx"]={name:"VisualBlock",docgenInfo:VisualBlock.__docgenInfo,path:"src/components/Block/VisualBlock.jsx"});var PreviewBlock=function PreviewBlock(_ref){var id=_ref.id,staticData=_ref.staticData,bounded=_ref.bounded,highlightColor=_ref.highlightColor,context=_ref.context,style=_ref.style,_useProgrammingStore=useProgrammingStore((0,react.useCallback)((function(state){var data=staticData||(state.programData[id]?state.programData[id]:null),typeSpec=state.programSpec.objectTypes[null==data?void 0:data.type],refData=data.ref?state.programData[data.ref]:{},selected=(null==data?void 0:data.selected)||refData.selected,argumentBlockData=(null!=data&&data.arguments?data.arguments:null!=refData&&refData.arguments?refData.arguments:[]).map((function(instanceId){var inst=state.programData[instanceId],instType=state.programSpec.objectTypes[inst.type];return referenceTemplateFromSpec(inst.type,inst,instType)}));return[(0,objectSpread2.Z)((0,objectSpread2.Z)({},data),{},{refData:refData,selected:selected,argumentBlockData:argumentBlockData}),typeSpec]}),[id,staticData])),_useProgrammingStore2=(0,slicedToArray.Z)(_useProgrammingStore,2),data=_useProgrammingStore2[0],typeSpec=_useProgrammingStore2[1],blockContext=data.arguments?data.arguments:[],wholeContext=[].concat((0,toConsumableArray.Z)(context),(0,toConsumableArray.Z)(blockContext));return data?(0,jsx_runtime.jsx)(VisualBlock,{data:data,typeSpec:typeSpec,interactionDisabled:!0,bounded:bounded,highlightColor:highlightColor,context:wholeContext,style:style}):null};PreviewBlock.__docgenInfo={description:"",methods:[],displayName:"PreviewBlock"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Block/PreviewBlock.jsx"]={name:"PreviewBlock",docgenInfo:PreviewBlock.__docgenInfo,path:"src/components/Block/PreviewBlock.jsx"});var Block=function Block(_ref){var id=_ref.id,staticData=_ref.staticData,parentId=_ref.parentId,fieldInfo=_ref.fieldInfo,idx=_ref.idx,dragDisabled=_ref.dragDisabled,bounded=_ref.bounded,after=_ref.after,highlightColor=_ref.highlightColor,context=_ref.context,interactionDisabled=_ref.interactionDisabled,_useProgrammingStore=useProgrammingStore((0,react.useCallback)((function(state){var data=staticData||(state.programData[id]?state.programData[id]:null),typeSpec=state.programSpec.objectTypes[null==data?void 0:data.type],refData=null!=data&&data.ref?state.programData[null==data?void 0:data.ref]:{},selected=(null==data?void 0:data.selected)||(null==refData?void 0:refData.selected),editing=(null==data?void 0:data.editing)||(null==refData?void 0:refData.editing),argumentBlockData=(null!=data&&data.arguments?data.arguments:null!=refData&&refData.arguments?refData.arguments:[]).map((function(instanceId){var inst=state.programData[instanceId],instType=state.programSpec.objectTypes[inst.type];return referenceTemplateFromSpec(inst.type,inst,instType)}));return[(0,objectSpread2.Z)((0,objectSpread2.Z)({},data),{},{refData:refData,selected:selected,editing:editing,argumentBlockData:argumentBlockData}),typeSpec]}),[id,staticData])),_useProgrammingStore2=(0,slicedToArray.Z)(_useProgrammingStore,2),data=_useProgrammingStore2[0],typeSpec=_useProgrammingStore2[1],blockContext=data.arguments?data.arguments:[],wholeContext=[].concat((0,toConsumableArray.Z)(context),(0,toConsumableArray.Z)(blockContext)),onCanvas=data.dataType===Constants.D3.REFERENCE?typeSpec.referenceBlock.onCanvas:data.dataType===Constants.D3.CALL?typeSpec.callBlock.onCanvas:data.dataType===Constants.D3.INSTANCE?typeSpec.instanceBlock.onCanvas:"null",_useDrag=(0,useDrag.c)((function(){return{type:null!=data&&data.type?data.type:"null",item:function item(){return{data:data,typeSpec:typeSpec,parentId:parentId,fieldInfo:fieldInfo,idx:idx,onCanvas:onCanvas,context:wholeContext}},canDrag:!dragDisabled&&!data.editing,collect:function collect(monitor){return{isDragging:monitor.isDragging()}}}}),[data,typeSpec,parentId,fieldInfo,idx,dragDisabled]),_useDrag2=(0,slicedToArray.Z)(_useDrag,3),dragProps=_useDrag2[0],drag=_useDrag2[1],preview=_useDrag2[2],hidden=!(null!=fieldInfo&&fieldInfo.isSpawner)&&dragProps.isDragging;return(0,react.useEffect)((function(){preview((0,getEmptyImage.r)(),{captureDraggingState:!1})}),[preview]),data&&"null"!==onCanvas?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{hidden:hidden,style:{flex:1,display:hidden?"none":"flex"},children:(0,jsx_runtime.jsx)(VisualBlock,{data:data,ref:drag,typeSpec:typeSpec,bounded:bounded,highlightColor:highlightColor,context:wholeContext,interactionDisabled:interactionDisabled,fieldInfo:fieldInfo,parentId:parentId})}),(0,jsx_runtime.jsx)("div",{hidden:hidden,style:{display:hidden?"none":"flex"},children:after})]}):null};Block.__docgenInfo={description:"",methods:[],displayName:"Block"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Block/index.jsx"]={name:"Block",docgenInfo:Block.__docgenInfo,path:"src/components/Block/index.jsx"});var web=__webpack_require__("./node_modules/react-use-measure/dist/web.js"),_excluded=["highlightColor"],CanvasNode=function CanvasNode(_ref){var data=_ref.data,highlightColor=data.highlightColor,rest=(0,objectWithoutProperties.Z)(data,_excluded);return(0,jsx_runtime.jsx)(VisualBlock,{data:rest,x:0,y:0,typeSpec:rest.typeSpec,onCanvas:!0,highlightColor:highlightColor,context:rest.context})},Canvas=function Canvas(_ref2){var highlightColor=_ref2.highlightColor,nodes=(_ref2.drawerWidth,useProgrammingStore((function(state){return Object.values(state.programData).map((function(data){var _state$programSpec$ob,_state$programSpec$ob2,typeSpec=state.programSpec.objectTypes[data.type],blockType=data.dataType===Constants.D3.INSTANCE?"instanceBlock":data.dataType===Constants.D3.CALL?"callBlock":data.dataType===Constants.D3.REFERENCE?"referenceBlock":"nullBlock",color=null===(_state$programSpec$ob=state.programSpec.objectTypes[data.type][blockType])||void 0===_state$programSpec$ob?void 0:_state$programSpec$ob.color,onCanvas=null===(_state$programSpec$ob2=state.programSpec.objectTypes[data.type][blockType])||void 0===_state$programSpec$ob2?void 0:_state$programSpec$ob2.onCanvas,ref=data.ref?state.programData[data.ref]:{},argumentBlockData=(null!=data&&data.arguments?data.arguments:null!=ref&&ref.arguments?ref.arguments:[]).map((function(instanceId){var inst=state.programData[instanceId],instType=state.programSpec.objectTypes[inst.type];return referenceTemplateFromSpec(inst.type,inst,instType)}));return{id:data.id,position:data.position,type:"canvasNode",data:(0,objectSpread2.Z)((0,objectSpread2.Z)({},data),{},{highlightColor:highlightColor,ref:ref,typeSpec:(0,objectSpread2.Z)((0,objectSpread2.Z)({},typeSpec),{},{color:color,onCanvas:onCanvas}),context:data.arguments?data.arguments:[],argumentBlockData:argumentBlockData})}})).filter((function(data){var _data$data$typeSpec;return null===(_data$data$typeSpec=data.data.typeSpec)||void 0===_data$data$typeSpec?void 0:_data$data$typeSpec.onCanvas}))}))),acceptTypes=useProgrammingStore((function(state){return Object.entries(state.programSpec.objectTypes).filter((function(_ref3){var _objectType$instanceB,_objectType$reference,_objectType$callBlock,_ref4=(0,slicedToArray.Z)(_ref3,2),objectType=(_ref4[0],_ref4[1]);return(null===(_objectType$instanceB=objectType.instanceBlock)||void 0===_objectType$instanceB?void 0:_objectType$instanceB.onCanvas)||(null===(_objectType$reference=objectType.referenceBlock)||void 0===_objectType$reference?void 0:_objectType$reference.onCanvas)||(null===(_objectType$callBlock=objectType.callBlock)||void 0===_objectType$callBlock?void 0:_objectType$callBlock.onCanvas)})).map((function(_ref5){return(0,slicedToArray.Z)(_ref5,1)[0]}))})),moveNode=useProgrammingStore((function(state){return state.moveBlock})),createPlacedNode=useProgrammingStore((function(state){return state.createPlacedBlock})),project=(0,ReactFlow_esm._K)().project,_useMeasure=(0,web.Z)(),_useMeasure2=(0,slicedToArray.Z)(_useMeasure,2),ref=_useMeasure2[0],bounds=_useMeasure2[1],drop=(0,useDrop.L)({accept:acceptTypes,canDrop:function canDrop(item){return item.onCanvas},drop:function drop(item,monitor){var clientOffset=monitor.getClientOffset();console.log(monitor);var position=project({x:clientOffset.x-bounds.left-50,y:clientOffset.y-bounds.top});createPlacedNode(item.data,position.x,position.y)}})[1];return(0,jsx_runtime.jsx)("div",{ref:ref,style:{backgroundColor:"black",display:"flex",flex:1},children:(0,jsx_runtime.jsxs)(ReactFlow_esm.ZP,{ref:drop,maxZoom:1.5,minZoom:.5,nodesConnectable:!1,elementsSelectable:!1,nodesDraggable:!0,nodeTypes:(0,react.useMemo)((function(){return{canvasNode:CanvasNode}}),[]),nodes:nodes,onConnect:function onConnect(_){},onNodesChange:moveNode,defaultZoom:1,fitView:!0,snapToGrid:!0,snapGrid:[30,30],children:[(0,jsx_runtime.jsx)(ReactFlow_esm.a9,{maskColor:"#1a192b44",nodeStrokeColor:function nodeStrokeColor(n){var _n$style;return null!==(_n$style=n.style)&&void 0!==_n$style&&_n$style.background?n.style.background:null!==n.data.typeSpec.color?n.data.typeSpec.color:"#eee"},nodeColor:function nodeColor(n){var _n$style2;return null!==n.data.typeSpec.color?n.data.typeSpec.color:null!==(_n$style2=n.style)&&void 0!==_n$style2&&_n$style2.background?n.style.background:"#fff"},nodeBorderRadius:3}),(0,jsx_runtime.jsx)(ReactFlow_esm.ZX,{}),(0,jsx_runtime.jsx)(ReactFlow_esm.Aq,{variant:"lines",color:"#555",gap:30})]})})};Canvas.__docgenInfo={description:"",methods:[],displayName:"Canvas"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Canvas.jsx"]={name:"Canvas",docgenInfo:Canvas.__docgenInfo,path:"src/components/Canvas.jsx"});var List_List=__webpack_require__("./node_modules/grommet/es6/components/List/List.js"),TipContent=function TipContent(_ref){var message=_ref.message;return(0,jsx_runtime.jsxs)(Box.x,{direction:"row",align:"center",children:[(0,jsx_runtime.jsx)("svg",{viewBox:"0 0 22 22",version:"1.1",width:"22px",height:"22px",children:(0,jsx_runtime.jsx)("polygon",{fill:"grey",points:"6 2 18 12 6 22",transform:"matrix(-1 0 0 1 30 0)"})}),(0,jsx_runtime.jsx)(Box.x,{background:"grey",direction:"row",pad:"small",round:"xxsmall",children:(0,jsx_runtime.jsx)(Text.x,{color:"#313131",children:message})})]})},Drawer=function Drawer(_ref2){var highlightColor=_ref2.highlightColor,drawerWidth=_ref2.drawerWidth,_useState=(0,react.useState)(""),_useState2=(0,slicedToArray.Z)(_useState,2),searchTerm=_useState2[0],setSearchTerm=_useState2[1],_useMeasure=(0,web.Z)(),_useMeasure2=(0,slicedToArray.Z)(_useMeasure,2),drawerRef=_useMeasure2[0],drawerBounds=_useMeasure2[1],_useMeasure3=(0,web.Z)(),_useMeasure4=(0,slicedToArray.Z)(_useMeasure3,2),headerRef=_useMeasure4[0],headerBounds=_useMeasure4[1],blocks=useProgrammingStore((function(store){var blocks=[];if(null!==store.activeDrawer){var drawer=store.programSpec.drawers[store.activeDrawer];drawer.dataType===Constants.D3.INSTANCE?drawer.objectTypes.forEach((function(objectType){blocks.push(instanceTemplateFromSpec(objectType,store.programSpec.objectTypes[objectType]))})):drawer.dataType===Constants.D3.REFERENCE?Object.values(store.programData).filter((function(d){return d.dataType===Constants.D3.INSTANCE&&d.type===drawer.objectType})).forEach((function(instanceReference){blocks.push(referenceTemplateFromSpec(drawer.objectType,instanceReference,store.programSpec.objectTypes[drawer.objectType]))})):drawer.dataType===Constants.D3.CALL&&Object.values(store.programData).filter((function(d){return d.dataType===Constants.D3.INSTANCE&&d.type===drawer.objectType})).forEach((function(functionReference){blocks.push(function callTemplateFromSpec(type,functionReference,objectSpec){var data={id:type,type:type,ref:functionReference.id,dataType:Constants.D3.CALL,name:functionReference.name,properties:{},canDelete:!0,canEdit:!0,editing:!1,selected:!1};return objectSpec.callBlock.onCanvas&&(data.position={x:0,y:0}),functionReference.arguments&&Object.entries(functionReference.arguments).forEach((function(_ref3){var _ref4=(0,slicedToArray.Z)(_ref3,2),argKey=_ref4[0],argInfo=_ref4[1];data.properties[argKey]=argInfo.default})),data}(drawer.objectType,functionReference,store.programSpec.objectTypes[drawer.objectType]))}))}return blocks.filter((function(block){return block.name.toLowerCase().includes(searchTerm.toLowerCase())||""===searchTerm}))})),hlcolor=highlightColor||"cyan",drawers=useProgrammingStore((function(store){return store.programSpec.drawers})),activeDrawer=useProgrammingStore((function(store){return store.activeDrawer})),setActiveDrawer=useProgrammingStore((function(store){return store.setActiveDrawer})),addInstance=useProgrammingStore((function(store){return store.addInstance})),drawerStyle=(0,react_spring_web_esm.useSpring)({width:null!==activeDrawer?drawerWidth:0,config:react_spring_esm.config.stiff}),sidebarStyle=(0,react_spring_web_esm.useSpring)({width:null!==activeDrawer?drawerWidth+52:52,config:react_spring_esm.config.stiff});return(0,jsx_runtime.jsxs)(react_spring_web_esm.q.div,{style:(0,objectSpread2.Z)({backgroundColor:"black",display:"flex",padding:0},sidebarStyle),children:[(0,jsx_runtime.jsx)("div",{style:{display:"flex",height:"100%",width:52,backgroundColor:"#212121",padding:0},children:(0,jsx_runtime.jsx)(List_List.a,{data:drawers,border:!1,align:"center",margin:"none",pad:"none",radius:"none",children:function children(drawer,drawerIdx){var Icon=drawer.icon;return(0,jsx_runtime.jsx)(Button.z,{primary:!0,tip:{content:(0,jsx_runtime.jsx)(TipContent,{message:drawer.title}),plain:!0,dropProps:{align:{left:"right"}}},focusIndicator:!1,hoverIndicator:activeDrawer===drawerIdx?hlcolor:"#414141",color:activeDrawer===drawerIdx?hlcolor:"#313131",margin:{top:"xsmall",bottom:"none",left:"xsmall",right:"xsmall"},round:"small",onClick:function onClick(){setSearchTerm(""),setActiveDrawer(activeDrawer===drawerIdx?null:drawerIdx)},icon:(0,jsx_runtime.jsx)(Icon,{})})}})}),(0,jsx_runtime.jsx)(react_spring_web_esm.q.div,{ref:drawerRef,style:(0,objectSpread2.Z)({height:"100%",backgroundColor:"#2f2f2f",overflow:"hidden"},drawerStyle),children:null!==activeDrawer&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(Box.x,{ref:headerRef,background:"#444444",direction:"column",pad:"small",animation:"fadeIn",children:[(0,jsx_runtime.jsxs)(Box.x,{direction:"row",justify:"between",align:"center",children:[(0,jsx_runtime.jsx)(Box.x,{pad:"small",children:(0,jsx_runtime.jsx)(Text.x,{children:drawers[activeDrawer].title})}),drawers[activeDrawer].dataType===Constants.D3.REFERENCE&&(0,jsx_runtime.jsx)(Button.z,{secondary:!0,onClick:function onClick(){return addInstance(drawers[activeDrawer].objectType)},icon:(0,jsx_runtime.jsx)(index_esm.OvN,{})})]}),(0,jsx_runtime.jsx)(TextInput.o,{size:"small",icon:(0,jsx_runtime.jsx)(index_esm.jRj,{style:{height:15}}),placeholder:"search ...",focusIndicator:!1,value:searchTerm,onChange:function onChange(e){return setSearchTerm(e.target.value)}})]}),(0,jsx_runtime.jsx)(Box.x,{style:{height:drawerBounds.height-headerBounds.height,overflowY:"scroll"},children:(0,jsx_runtime.jsx)(List_List.a,{data:blocks,border:!1,style:{padding:5},margin:"none",pad:"none",children:function children(block,idx){return(0,jsx_runtime.jsx)(Box.x,{animation:{type:"fadeIn",delay:100*idx},style:{marginBottom:5,width:drawerWidth-10},children:(0,jsx_runtime.jsx)(Block,{staticData:block,parentId:"spawner",bounded:!0,highlightColor:highlightColor,context:[],interactionDisabled:!0,fieldInfo:{name:"",value:null,accepts:[],isSpawner:!0}})},idx)}})})]})})]})};Drawer.__docgenInfo={description:"",methods:[],displayName:"Drawer"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Drawer.jsx"]={name:"Drawer",docgenInfo:Drawer.__docgenInfo,path:"src/components/Drawer.jsx"});var useDragLayer=__webpack_require__("./node_modules/react-dnd/dist/esm/hooks/useDragLayer.js"),DragLayer=function DragLayer(_ref){var highlightColor=_ref.highlightColor,_useDragLayer=(0,useDragLayer.f)((function(monitor){return{item:monitor.getItem(),currentOffset:monitor.getSourceClientOffset(),isDragging:monitor.isDragging()}})),isDragging=_useDragLayer.isDragging,item=_useDragLayer.item,currentOffset=_useDragLayer.currentOffset;return(0,jsx_runtime.jsx)("div",{style:{position:"fixed",pointerEvents:"none",zIndex:100,left:0,top:0,width:0,height:0,opacity:.5},children:item&&(0,jsx_runtime.jsx)(VisualBlock,{x:null==currentOffset?void 0:currentOffset.x,y:null==currentOffset?void 0:currentOffset.y,data:item.data,isDragging:isDragging,typeSpec:item.typeSpec,highlightColor:highlightColor,context:item.context})})};DragLayer.__docgenInfo={description:"",methods:[],displayName:"DragLayer"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/DragLayer.jsx"]={name:"DragLayer",docgenInfo:DragLayer.__docgenInfo,path:"src/components/DragLayer.jsx"});var dist_esm=__webpack_require__("./node_modules/rdndmb-html5-to-touch/dist/esm/index.js"),react_dnd_multi_backend_dist_esm=__webpack_require__("./node_modules/react-dnd-multi-backend/dist/esm/index.js"),DndProvider=__webpack_require__("./node_modules/react-dnd/dist/esm/core/DndProvider.js"),Grommet=__webpack_require__("./node_modules/grommet/es6/components/Grommet/Grommet.js");function Environment(_ref){var store=_ref.store,highlightColor=_ref.highlightColor,height=_ref.height,width=_ref.width,drawerWidth=_ref.drawerWidth,theme={name:"SimpleVP",rounding:4,defaultMode:"dark",global:{colors:{brand:highlightColor,background:"#111111",control:highlightColor},font:{family:"Helvetica"},focus:{border:{color:highlightColor}},input:{padding:4,extend:{backgroundColor:"#FFFFFF55"}}},button:{border:{radius:"10px"}},radioButton:{size:"16px",border:{color:"#00000088"}},checkBox:{size:"20px",border:{color:"#00000088"},color:highlightColor,hover:{border:{color:"#00000088"}}},textInput:{disabled:{opacity:1}}};return(0,jsx_runtime.jsx)(Grommet.p,{theme:theme,children:(0,jsx_runtime.jsx)(ProgrammingProvider,{store:store,children:(0,jsx_runtime.jsxs)(DndProvider.W,{backend:react_dnd_multi_backend_dist_esm.Am,options:dist_esm.r,children:[(0,jsx_runtime.jsxs)("div",{style:{padding:0,margin:0,display:"flex",height:height,width:width},children:[(0,jsx_runtime.jsx)(Drawer,{highlightColor:highlightColor,drawerWidth:drawerWidth||235}),(0,jsx_runtime.jsx)(ReactFlow_esm.tV,{children:(0,jsx_runtime.jsx)(Canvas,{highlightColor:highlightColor,drawerWidth:drawerWidth||235})})]}),(0,jsx_runtime.jsx)(DragLayer,{highlightColor:highlightColor})]})})})}Environment.__docgenInfo={description:"",methods:[],displayName:"Environment"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Environment.jsx"]={name:"Environment",docgenInfo:Environment.__docgenInfo,path:"src/components/Environment.jsx"})},"./src sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?%21(?:^|\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.(js|jsx|ts|tsx))$":function(module,__unused_webpack_exports,__webpack_require__){var map={"./stories/Embedded.stories.jsx":"./src/stories/Embedded.stories.jsx","./stories/Environment.stories.jsx":"./src/stories/Environment.stories.jsx","./stories/Stress.stories.jsx":"./src/stories/Stress.stories.jsx"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./src sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?%21(?:^|\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.(js|jsx|ts|tsx))$"},"./src sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?%21(?:^|\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.mdx)$":function(module){function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id="./src sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?%21(?:^|\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.mdx)$",module.exports=webpackEmptyContext},"./storybook-init-framework-entry.js":function(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__){"use strict";__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js")},"?4f7e":function(){}},function(__webpack_require__){var __webpack_exec__=function(moduleId){return __webpack_require__(__webpack_require__.s=moduleId)};__webpack_require__.O(0,[198],(function(){return __webpack_exec__("./node_modules/@storybook/core-client/dist/esm/globals/polyfills.js"),__webpack_exec__("./node_modules/@storybook/core-client/dist/esm/globals/globals.js"),__webpack_exec__("./storybook-init-framework-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-docs/dist/esm/frameworks/common/config.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-docs/dist/esm/frameworks/react/config.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/react/dist/esm/client/preview/config-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-links/dist/esm/preset/addDecorator.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-actions/dist/esm/preset/addDecorator.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-actions/dist/esm/preset/addArgs.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-backgrounds/dist/esm/preset/addDecorator.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-backgrounds/dist/esm/preset/addParameter.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-measure/dist/esm/preset/addDecorator.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-outline/dist/esm/preset/addDecorator.js-generated-config-entry.js"),__webpack_exec__("./.storybook/preview.js-generated-config-entry.js"),__webpack_exec__("./generated-stories-entry.js")}));__webpack_require__.O()}]);