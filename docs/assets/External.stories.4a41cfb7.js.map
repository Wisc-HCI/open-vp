{"version":3,"file":"External.stories.4a41cfb7.js","sources":["../../src/components/Block/ExternalBlock.jsx","../../src/stories/External.stories.jsx"],"sourcesContent":["import React, { useCallback } from \"react\";\n// import { Grommet } from \"grommet\";\nimport { VisualBlock } from \"./VisualBlock\";\nimport {\n  ProgrammingProvider,\n  useProgrammingStore,\n} from \"../ProgrammingContext\";\nimport { HTML5toTouch } from \"rdndmb-html5-to-touch\";\nimport { MultiBackend } from \"react-dnd-multi-backend\";\nimport { DndProvider } from \"react-dnd\";\nimport { combinedBlockData } from \"../Generators\";\nimport { stringEquality } from \"./Utility\";\nimport { StyleWrapper } from \"../Environment\";\n\nconst InnerExternalBlock = (props) => {\n  const [data, typeSpec] = useProgrammingStore(\n    useCallback(\n      (state) => combinedBlockData(state, props.data, null),\n      [props.data]\n    ),\n    stringEquality\n  );\n\n  const otherProps = {\n    x: 0,\n    z: 0,\n    scale: 1,\n    onCanvas: false,\n    interactionDisabled: true,\n    bounded: true,\n    fieldInfo: \"outside\",\n    parentId: \"outside\",\n  };\n\n  return (\n    <VisualBlock {...props} {...otherProps} data={data} typeSpec={typeSpec} />\n  );\n};\n\nexport const UnwrappedExternalBlock = ({\n  highlightColor,\n  data,\n  style,\n  context,\n}) => {\n  return (\n    <DndProvider backend={MultiBackend} options={HTML5toTouch}>\n      <InnerExternalBlock\n        highlightColor={highlightColor}\n        data={data}\n        style={{ ...style }}\n        context={context}\n      />\n    </DndProvider>\n  );\n};\n\nexport const ExternalBlock = ({\n  store,\n  highlightColor,\n  data,\n  style,\n  context,\n}) => {\n\n  return (\n    <StyleWrapper highlightColor={highlightColor}>\n      <ProgrammingProvider store={store}>\n        <UnwrappedExternalBlock\n          highlightColor={highlightColor}\n          data={data}\n          style={{ ...style }}\n          context={context}\n        />\n      </ProgrammingProvider>\n    </StyleWrapper>\n  );\n};\n","import React, { useLayoutEffect } from 'react';\nimport { useDefaultProgrammingStore, referenceTemplateFromSpec } from '../components';\nimport { ExternalBlock } from '../components';\nimport basicConfig from './assets/basicConfig';\nimport basicStarter from './assets/basicStarter';\n\n// More on default export: https://storybook.js.org/docs/react/writing-stories/introduction#default-export\nexport default {\n  title: 'External',\n  component: ExternalBlock\n};\n\n// More on component templates: https://storybook.js.org/docs/react/writing-stories/introduction#using-args\nconst Template = (args) => {\n  const { drawers, objectTypes, programData, highlightColor } = args;\n\n  useLayoutEffect(()=>{\n    useDefaultProgrammingStore.setState({programSpec:{drawers,objectTypes},programData});\n  })\n\n  const instRef = referenceTemplateFromSpec('hatType',programData['6dewwwwww'],objectTypes.hatType)\n\n  return (\n    <div style={{width:300,padding:4}}>\n      <div style={{paddingBottom:4}}>\n        <ExternalBlock \n          store={useDefaultProgrammingStore} \n          data={programData['2dfsessfs']} \n          highlightColor={highlightColor}\n          context={{}}\n        />\n      </div>\n      <div style={{paddingBottom:4}}>\n        <ExternalBlock \n          store={useDefaultProgrammingStore} \n          data={instRef} \n          highlightColor={highlightColor}\n          context={{}}\n        />\n      </div>\n      \n    </div>\n    )\n};\n\nexport const External = Template.bind({});\n// More on args: https://storybook.js.org/docs/react/writing-stories/args\nExternal.args = {\n  highlightColor: '#ff00ff',\n  drawerWidth: 235,\n  ...basicConfig,\n  ...basicStarter,\n};"],"names":["InnerExternalBlock","props","data","typeSpec","useProgrammingStore","useCallback","combinedBlockData","state","stringEquality","VisualBlock","x","z","scale","onCanvas","interactionDisabled","bounded","fieldInfo","parentId","UnwrappedExternalBlock","highlightColor","style","context","DndProvider","MultiBackend","HTML5toTouch","ExternalBlock","store","StyleWrapper","ProgrammingProvider","External_stories","title","component","Template","args","drawers","objectTypes","programData","useLayoutEffect","useDefaultProgrammingStore","setState","programSpec","instRef","referenceTemplateFromSpec","hatType","width","padding","_jsx","paddingBottom","External","bind","drawerWidth","basicConfig","basicStarter"],"mappings":"yWAcA,MAAMA,EAAgCC,GAAA,CACpC,KAAM,CAACC,EAAMC,CAAP,EAAmBC,EACvBC,yBACaC,EAAkBC,EAAON,EAAMC,KAAM,IAApB,EAC5B,CAACD,EAAMC,IAAP,CAFS,EAIXM,CAL0C,EAmB5C,SACGC,EAAD,CAAA,GAAiBR,EAAjB,GAZiB,CACjBS,EAAG,EACHC,EAAG,EACHC,MAAO,EACPC,SAAU,GACVC,oBAAqB,GACrBC,QAAS,GACTC,UAAW,UACXC,SAAU,SAAA,EAI8B,KAAAf,EAAY,SAAAC,CAAA,CADtD,CAGD,EAEYe,EAAyB,CAAC,CACrCC,eAAAA,EACAjB,KAAAA,EACAkB,MAAAA,EACAC,QAAAA,CAJqC,MAOlCC,EAAD,CAAa,QAASC,EAAc,QAASC,EAA7C,WACGxB,EAAD,CACE,eAAAmB,EACA,KAAAjB,EACA,MAAO,CAAE,GAAGkB,CAAL,EACP,QAAAC,CAAA,CAJF,CAAA,CAFJ,EAYWI,EAAgB,CAAC,CAC5BC,MAAAA,EACAP,eAAAA,EACAjB,KAAAA,EACAkB,MAAAA,EACAC,QAAAA,CAL4B,MASzBM,EAAD,CAAc,eAAAR,EAAd,WACGS,EAAD,CAAqB,MAAAF,EAArB,WACGR,EAAD,CACE,eAAAC,EACA,KAAAjB,EACA,MAAO,CAAE,GAAGkB,CAAL,EACP,QAAAC,CAAA,CAJF,CAAA,CADF,CAAA,CAFJ,EC1DaQ,EAAA,CACbC,MAAO,WACPC,UAAWN,CAFE,EAMTO,EAAqBC,GAAA,CACnB,KAAA,CAAEC,QAAAA,EAASC,YAAAA,EAAaC,YAAAA,EAAajB,eAAAA,CAAmBc,EAAAA,EAE9DI,EAAAA,QAAAA,gBAAgB,IAAI,CAClBC,EAA2BC,SAAS,CAACC,YAAY,CAACN,QAAAA,EAAQC,YAAAA,CAAT,EAAsBC,YAAAA,CAAAA,CAAvE,CAAA,CADa,EAIf,MAAMK,EAAUC,EAA0B,UAAUN,EAAY,aAAaD,EAAYQ,OAAhD,EAEzC,SACE,MAAA,CAAK,MAAO,CAACC,MAAM,IAAIC,QAAQ,CAAnB,EAAZ,SACE,CAAAC,EAAA,MAAA,CAAK,MAAO,CAACC,cAAc,CAAf,EAAZ,WACGtB,EAAD,CACE,MAAOa,EACP,KAAMF,EAAY,aAClB,eAAAjB,EACA,QAAS,CAAA,CAAA,CAJX,CAAA,CADF,EAQA2B,EAAA,MAAA,CAAK,MAAO,CAACC,cAAc,CAAf,EAAZ,WACGtB,EAAD,CACE,MAAOa,EACP,KAAMG,EACN,eAAAtB,EACA,QAAS,CAAA,CAAA,CAJX,CAAA,CAVJ,CAAA,CAAA,CADF,CAqBD,EAEY6B,EAAWhB,EAASiB,KAAK,EAAd,EAExBD,EAASf,KAAO,CACdd,eAAgB,UAChB+B,YAAa,IACb,GAAGC,EACH,GAAGC,CAJW"}