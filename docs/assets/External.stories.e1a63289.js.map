{"version":3,"file":"External.stories.e1a63289.js","sources":["../../src/components/Block/ExternalBlock.jsx","../../src/stories/External.stories.jsx"],"sourcesContent":["import React, { useCallback } from \"react\";\n// import { Grommet } from \"grommet\";\nimport { VisualBlock } from \"./VisualBlock\";\nimport {\n  ProgrammingProvider,\n  useProgrammingStore,\n} from \"../ProgrammingContext\";\nimport { HTML5toTouch } from \"rdndmb-html5-to-touch\";\nimport { MultiBackend } from \"react-dnd-multi-backend\";\nimport { DndProvider } from \"react-dnd\";\nimport { combinedBlockData } from \"../Generators\";\nimport { stringEquality } from \"./Utility\";\nimport { StyleWrapper } from \"../Environment\";\n\nconst InnerExternalBlock = (props) => {\n  const [data, typeSpec] = useProgrammingStore(\n    useCallback(\n      (state) => combinedBlockData(state, props.data, null),\n      [props.data]\n    ),\n    stringEquality\n  );\n\n  const otherProps = {\n    x: 0,\n    z: 0,\n    scale: 1,\n    onCanvas: false,\n    interactionDisabled: true,\n    bounded: true,\n    fieldInfo: \"outside\",\n    parentId: \"outside\",\n  };\n\n  return (\n    <VisualBlock {...props} {...otherProps} data={data} typeSpec={typeSpec} />\n  );\n};\n\nexport const UnwrappedExternalBlock = ({\n  highlightColor,\n  data,\n  style,\n  context,\n}) => {\n  return (\n    <DndProvider backend={MultiBackend} options={HTML5toTouch}>\n      <InnerExternalBlock\n        highlightColor={highlightColor}\n        data={data}\n        style={{ ...style }}\n        context={context}\n      />\n    </DndProvider>\n  );\n};\n\nexport const ExternalBlock = ({\n  store,\n  highlightColor,\n  data,\n  style,\n  context,\n}) => {\n\n  return (\n    <StyleWrapper highlightColor={highlightColor}>\n      <ProgrammingProvider store={store}>\n        <UnwrappedExternalBlock\n          highlightColor={highlightColor}\n          data={data}\n          style={{ ...style }}\n          context={context}\n        />\n      </ProgrammingProvider>\n    </StyleWrapper>\n  );\n};\n","import React, { useLayoutEffect } from 'react';\nimport { useDefaultProgrammingStore, referenceTemplateFromSpec } from '../components';\nimport { ExternalBlock } from '../components';\nimport basicConfig from './assets/basicConfig';\nimport basicStarter from './assets/basicStarter';\n\n// More on default export: https://storybook.js.org/docs/react/writing-stories/introduction#default-export\nexport default {\n  title: 'External',\n  component: ExternalBlock\n};\n\n// More on component templates: https://storybook.js.org/docs/react/writing-stories/introduction#using-args\nconst Template = args => {\n  const {\n    drawers,\n    objectTypes,\n    programData,\n    highlightColor\n  } = args;\n  useLayoutEffect(() => {\n    useDefaultProgrammingStore.setState({\n      programSpec: {\n        drawers,\n        objectTypes\n      },\n      programData\n    });\n  });\n  const instRef = referenceTemplateFromSpec('hatType', programData['6dewwwwww'], objectTypes.hatType);\n  return <div style={{\n    width: 300,\n    padding: 4\n  }}>\n      <div style={{\n      paddingBottom: 4\n    }}>\n        <ExternalBlock store={useDefaultProgrammingStore} data={programData['2dfsessfs']} highlightColor={highlightColor} context={{}} />\n      </div>\n      <div style={{\n      paddingBottom: 4\n    }}>\n        <ExternalBlock store={useDefaultProgrammingStore} data={instRef} highlightColor={highlightColor} context={{}} />\n      </div>\n      \n    </div>;\n};\nexport const External = Template.bind({});\n// More on args: https://storybook.js.org/docs/react/writing-stories/args\nExternal.args = {\n  highlightColor: '#ff00ff',\n  drawerWidth: 235,\n  ...basicConfig,\n  ...basicStarter\n};\nExternal.parameters = {\n  ...External.parameters,\n  storySource: {\n    source: \"args => {\\n  const {\\n    drawers,\\n    objectTypes,\\n    programData,\\n    highlightColor\\n  } = args;\\n  useLayoutEffect(() => {\\n    useDefaultProgrammingStore.setState({\\n      programSpec: {\\n        drawers,\\n        objectTypes\\n      },\\n      programData\\n    });\\n  });\\n  const instRef = referenceTemplateFromSpec('hatType', programData['6dewwwwww'], objectTypes.hatType);\\n  return <div style={{\\n    width: 300,\\n    padding: 4\\n  }}>\\n      <div style={{\\n      paddingBottom: 4\\n    }}>\\n        <ExternalBlock store={useDefaultProgrammingStore} data={programData['2dfsessfs']} highlightColor={highlightColor} context={{}} />\\n      </div>\\n      <div style={{\\n      paddingBottom: 4\\n    }}>\\n        <ExternalBlock store={useDefaultProgrammingStore} data={instRef} highlightColor={highlightColor} context={{}} />\\n      </div>\\n      \\n    </div>;\\n}\",\n    ...External.parameters?.storySource\n  }\n};"],"names":["InnerExternalBlock","props","data","typeSpec","useProgrammingStore","useCallback","combinedBlockData","state","stringEquality","VisualBlock","x","z","scale","onCanvas","interactionDisabled","bounded","fieldInfo","parentId","UnwrappedExternalBlock","highlightColor","style","context","DndProvider","MultiBackend","HTML5toTouch","ExternalBlock","store","StyleWrapper","ProgrammingProvider","External_stories","title","component","Template","args","drawers","objectTypes","programData","useLayoutEffect","useDefaultProgrammingStore","setState","programSpec","instRef","referenceTemplateFromSpec","hatType","width","padding","_jsx","paddingBottom","External","bind","drawerWidth","basicConfig","basicStarter","parameters","storySource","source"],"mappings":"4aAcA,MAAMA,EAAgCC,GAAA,CACpC,KAAM,CAACC,EAAMC,CAAQ,EAAIC,EACvBC,yBACaC,EAAkBC,EAAON,EAAMC,KAAM,IAAI,EACpD,CAACD,EAAMC,IAAI,CAAC,EAEdM,CAAc,EAchB,SACGC,EAAW,CAAA,GAAKR,EAAK,GAZL,CACjBS,EAAG,EACHC,EAAG,EACHC,MAAO,EACPC,SAAU,GACVC,oBAAqB,GACrBC,QAAS,GACTC,UAAW,UACXC,SAAU,SAAA,EAI8B,KAAAf,EAAY,SAAAC,CAAA,CAAsB,CAE9E,EAEae,EAAyB,CAAC,CACrCC,eAAAA,EACAjB,KAAAA,EACAkB,MAAAA,EACAC,QAAAA,CACF,MAEKC,EAAW,CAAC,QAASC,EAAc,QAASC,EAAa,WACvDxB,EAAkB,CACjB,eAAAmB,EACA,KAAAjB,EACA,MAAO,CAAE,GAAGkB,CAAM,EAClB,QAAAC,CAAA,CAAiB,CAAA,CAEP,EAILI,EAAgB,CAAC,CAC5BC,MAAAA,EACAP,eAAAA,EACAjB,KAAAA,EACAkB,MAAAA,EACAC,QAAAA,CACF,MAGKM,EAAY,CAAC,eAAAR,EAA+B,WAC1CS,EAAmB,CAAC,MAAAF,EAAa,WAC/BR,EAAsB,CACrB,eAAAC,EACA,KAAAjB,EACA,MAAO,CAAE,GAAGkB,CAAM,EAClB,QAAAC,CAAA,CAAiB,CAAA,CACjB,CAAA,CAES,ECpEJQ,EAAA,CACbC,MAAO,WACPC,UAAWN,CACb,EAGMO,EAAmBC,GAAA,CACjB,KAAA,CACJC,QAAAA,EACAC,YAAAA,EACAC,YAAAA,EACAjB,eAAAA,CACEc,EAAAA,EACJI,EAAAA,QAAAA,gBAAgB,IAAM,CACpBC,EAA2BC,SAAS,CAClCC,YAAa,CACXN,QAAAA,EACAC,YAAAA,CACF,EACAC,YAAAA,CAAAA,CACD,CAAA,CACF,EACD,MAAMK,EAAUC,EAA0B,UAAWN,EAAY,aAAcD,EAAYQ,OAAO,EAClG,SAAO,MAAA,CAAK,MAAO,CACjBC,MAAO,IACPC,QAAS,CACX,EAAE,SACE,CAAAC,EAAA,MAAA,CAAK,MAAO,CACZC,cAAe,CACjB,EAAE,WACGtB,EAAa,CAAC,MAAOa,EAA4B,KAAMF,EAAY,aAAc,eAAAjB,EAAgC,QAAS,CAAC,CAAA,CAAE,CAAA,CAAG,EAEnI2B,EAAA,MAAA,CAAK,MAAO,CACZC,cAAe,CACjB,EAAE,WACGtB,EAAa,CAAC,MAAOa,EAA4B,KAAMG,EAAS,eAAAtB,EAAgC,QAAS,CAAC,CAAA,CAAE,CAAA,CACzG,CAAA,CAAA,CAEF,CACV,EACa6B,EAAWhB,EAASiB,KAAK,EAAE,EAExCD,EAASf,KAAO,CACdd,eAAgB,UAChB+B,YAAa,IACb,GAAGC,EACH,GAAGC,CACL,QACAJ,EAASK,WAAa,CACpB,GAAGL,EAASK,WACZC,YAAa,CACXC,OAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GACR,IAAGP,EAAAA,EAASK,aAATL,YAAAA,EAAqBM,WAC1B,CACF"}